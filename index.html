<!DOCTYPE html>
<html>
<head>
    <title>Browser Extensions</title>
    <meta charset='utf-8'>
    <style>
        table, td, th {
            border: 1px solid black;
            padding: 8px;
            font-size: 11pt;
        }
        
        table {
            border-collapse: collapse;
        }
    </style>
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' async class='remove'></script>
    <script class='remove'>
      var respecConfig = {
	shortName: "browserext",
	edDraftURI:"https://browserext.github.io/browserext/",

	specStatus: "CG-DRAFT",
	editors: [
	  {
	    name: "Mike Pietraszak",
	    company:"Microsoft Corporation"
	  }
	],

	wg: "Browser Extension Community Group",
	wgURI: "https://www.w3.org/community/browserext/",

	otherLinks: [{
	  key: 'Participation',
	  data: [
	    {
	      value: 'GitHub repository',
	      href: 'https://github.com/browserext/browserext/'
	    },
	    {
	      value: 'File a bug / view open issues',
	      href: 'https://github.com/browserext/browserext/issues'
	    }
	  ]
	}],
      };
    </script>
</head>
<body>
    <section id='abstract'>
        <p>
            Modern browsers can add new functionality to sites and the browser itself through
            script-based extensions. This document specifies an API set that allows developers
            to create interoperable extensions for browsers that support the API set,
            as well as the packaging format to be used for such extensions.
        </p>
    </section>
    <section id='sotd'>
        <p>
            If you wish to make comments regarding this document, please file issues on
            <a href="https://github.com/browserext/browserext/issues/">github</a>.
            A <a href="mailto:public-browserext@w3.org">public mailing list</a>
            (<a href="mailto:public-browserext-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="http://lists.w3.org/Archives/Public/public-browserext/">archives</a>)
            is also available,
            but is reserved for high level discussions,
            and is not appropriate for specific comments about this document.
        </p>
        <p>
            Work on this document is governed by
            <a href="http://browserext.github.io/charter/">the charter</a> of the Browser Extension CG,
            which includes among other things the <a href="http://browserext.github.io/charter/#communication">Communication</a>,
            <a href="http://browserext.github.io/charter/#decision-policy">Decision</a>,
            and <a href="http://browserext.github.io/charter/#contribution-mechanics">Contribution</a> policies
            of this community group.
        </p>
    </section>

    <section class='informative'>
        <h2>Introduction</h2>
        <p>
            Because browsers supported different add-on models, extension authors wound up creating divergent codebases and delivering different browser-specific add-ons. This Community Group's goal is to make browser extension code much more interoperable across browsers by specifying common extension interfaces and well-defined browser behavior. This will allow extension authors to greatly reduce or eliminate the rework necessary to create extensions that target different browsers.
        </p>
    </section>

    <section class='informative'>
        <h2>Core APIs</h2>
        <p>
            The goal for these core APIs is to provide functionality that extension authors need for: 
        </p>
        <ul>
            <li>page modification for web site content</li>
            <li>UI augmentation for web browsers (host apps)</li>
            <li>network request modification</li>
            <li>passing data between extensions</li>
            <li>passing data from Internet-hosted web pages to extensions</li>
            <li>accessing user settings such as cookies</li>
        </ul>
        <p class="issue">Need to resolve ID issue before we can address messaging ('passing data')<br />GitHub Issues <a href="https://github.com/browserext/browserext/issues/14">14</a>&nbsp;&amp;&nbsp;<a href="https://github.com/browserext/browserext/issues/17">17</a></p>
        <section  >
            <h3 id="apiavailability">API Availability</h3>
            <section class='informative'>
                <h3>Overview</h3>
                <p>
                    Browser extensions are authored primarily with JavaScript. In addition to the usual <a href="https://www.w3.org/standards/webdesign/script">JavaScript Web APIs</a>, additional APIs are available exclusively to extensions via the <code>browser</code> object. However, the specific APIs that are available to an extension from the <code>browser</code> object are dependent upon:
                </p>
                <ul>
                    <li>Execution context (e.g. background/event, popup, options, content, extension page)
                    <li>Keys declared in the manifest (e.g. browser_action, page_action)
                    <li>Permissions declared in the manifest (e.g. contextMenu, tabs, webNavigation, webRequest)
                    <li>Content Security Policy (CSP) for the extension and target web page (for content scripts)
                </ul>
                </section>
                <section>
                    <h4 id="availability-csp">Content Security Policy (CSP) Restrictions</h4>
                    <p>
                        Use of some JavaScript APIs such as <code>eval()</code> are restricted due to CSP. If an explicit policy is not specified, the default policy is applied. The default CSP is discussed in the specification [[CSP3]] . If the browser extension author specifies a new CSP, it will override the default CSP.
                    </p>
                    <p class="issue">Add a separate non-normative section on how content scripts interact with CSP<br /><a href="https://github.com/browserext/browserext/issues/18">GitHub Issue 18</a></p>
                    <ul>
                        <li>Script execution via <code>eval()</code> and inline script execution are not allowed</li>
                        <li>Only script from the extension's package can be executed</li>
                        <li>Executing script from the web is not allowed</li>
                    </ul>
                </section>

                <section class="informative">
                    <h4>Execution Context and Manifest Restrictions</h4>
                    <p>
                        Browser extension pages and their corresponding scripts are executed in one of the following contexts. The manifest declarations required to create each specific type of page are described below.
                    </p>
                    <ul>
                        <li>
                            <b>Browser extension contexts ("Window")</b> - Most extension APIs are available to this context
                            <ul>
                                <li><b>Background page</b> - use the "background" manifest key and specify "persistent" true </li>
                                <li><b>Event page</b> - use the "background" manifest key and specify "persistent" false </li>
                                <li><b>Popup page</b> - use the "browser_action" or "page_action" manifest key and specify "detault_popup" </li>
                                <li><b>Options page</b> - use the "options_page" manifest key </li>
                                <li><b>Custom page</b> - such as "browserext:&#x2F;&#x2F;&lt;ext_id&gt;&#x2F;myCustomPage.html" </li>
                            </ul>
                        </li>
                        <li><b>Content script context</b> - A limited number of APIs are available to script that extensions use to interact with hosted web site pages
                        <li><b>Internet-hosted web page context</b> - Messaging APIs can be used to send messages from hosted web site pages such as https://en.wikipedia.org/wiki/Main_Page/index.html or https://w3c.github.io/html/index.html to extensions
                    </ul>

                    <section>
                        <h5 id="availability-manifest">Table: API Availability Summary</h5>
                        <p>
                            Some browser extension API require a specific manifest key or specific permission. If the key or permission are not declared or not granted, the object will not be available for scripting. These requirements are summarized in the table below. If manifest keys that are not defined in this specification are specified, other browsers MAY elect to ignore those additional keys.
                        </p>
                        <table>
                            <tr>
                                <th rowspan=2>API object</th>
                                <th colspan=3>Execution Context</th>
                                <th colspan=1>Required Declaration</th>
                            </tr>
                            <tr>
                                <th>Background page,Event page,Popup page,Options page,Custom page</th>
                                <th>Content script page</th>
                                <th>Internet-hosted web page</th>
                                <th>Manifest key</th>
                            </tr>
                            <tr>
                                <th><code>browserAction</code></th>
                                <td>Y<sup><a href="#note1">1</a></sup></td>
                                <td><p></p></td>
                                <td><p></p></td>
                                <td>"browser_action"<sup><a href="#note1">1</a></sup></td>
                            </tr>
                            <tr>
                                <th><code>contextMenus</code></th>
                                <td>Y</td>
                                <td><p></p></td>
                                <td><p></p></td>
                                <td>"permissions":["context_menus"]</td>
                            </tr>
                            <tr>
                                <th><code>extension</code></th>
                                <td>Y</td>
                                <td>Y</td>
                                <td><p></p></td>
                                <td><p></p></td>
                            </tr>
                            <tr>
                                <th><code>i18n</code></th>
                                <td>Y</td>
                                <td>Y</td>
                                <td><p></p></td>
                                <td>"default_lang" : "&lt;lang&gt;"<sup><a href="#note4">4</a></sup></td>
                            </tr>
                            <tr>
                                <th><code>pageAction</code></th>
                                <td>Y<sup><a href="#note1">1</a></sup></td>
                                <td><p></p></td>
                                <td><p></p></td>
                                <td>"page_action"<sup><a href="#note1">1</a></sup></td>
                            </tr>
                            <tr>
                                <th><code>runtime</code></th>
                                <td>Y</td>
                                <td>Y</td>
                                <td>Y<sup><a href="#note3">3</a></sup></td>
                                <td>“externally_connectable”:[...] <sup><a href="#note2">2</a></sup></td>
                            </tr>
                            <tr>
                                <th><code>tabs</code></th>
                                <td>Y</td>
                                <td><p></p></td>
                                <td><p></p></td>
                                <td>"permissions":["tabs","activeTab"]</td>
                            </tr>
                            <tr>
                                <th><code>webNavigation</code></th>
                                <td>Y</td>
                                <td><p></p></td>
                                <td><p></p></td>
                                <td>"permissions":["webNavigation"]</td>
                            </tr>
                            <tr>
                                <th><code>webRequest</code></th>
                                <td>Y</td>
                                <td><p></p></td>
                                <td><p></p></td>
                                <td>"permissions":["webRequest"]</td>
                            </tr>
                            <tr>
                                <th><code>windows</code></th>
                                <td>Y</td>
                                <td><p></p></td>
                                <td><p></p></td>
                                <td><p></p></td>
                            </tr>
                        </table>
                        <div id="note1" resource="#note1">
                            <sup>1</sup> Either <code>browserAction</code> or <code>pageAction</code> is allowed at the same time, not both
                        </div>
                        <div id="note2" resource="#note2">
                            <sup>2</sup>The runtime object is available for use by extensions without declaring <code>"externally_connectable"</code> in the manifest. However, an extension will only receive messages sent from hosted web pages if this key is declared. The <code>"externally_connectable"</code> declaration will block messages from other extensions, unless the allowed extension ID is declared in the <code>"ids"</code> list.
                        </div>
                        <div id="note3" resource="#note3">
                            <sup>3</sup>Internet-hosted web pages that use <code>runtime.sendMessage</code> to communicate with extensions MUST be explicitly specify the hosting site's domain in the manifest under the "externally_connectable" key.
                        </div>
                        <div id="note4" resource="#note4">
                            <sup>4</sup> Use of the <code>browser.i18n</code> object does not require a manifest permission declaration. However, the manifest does require a value (<code>default_locale</code>) that is necessary and cannot be specified by the extension author in script code.
                        </div>
                    </section>
                </section>
                <section>
                    <h4 id="webidl">Expressing Availability in WebIDL</h4>
                    <p>This specification uses WebIDL [[webidl]] to describe the Browser Extensions API.</p>
                    <section>
                        <h4>Attribute: <code>Exposed</code></h4>
                        <p>
                            To express the aforementioned conditional situations in which certain APIs are made available due to context, the following contexts are used:
                        </p>
                        <ul>
                            <li><b>Window</b> - The primary context for most browser extension APIs. This applies to background, event, popup, options and custom contexts</li>
                            <li><b>ContentScript</b> - Applies to content script context</li>
                        </ul>
                    </section>
                    <section>
                        <h4>Extended Attribute: <code>CheckAnyPermissions</code></h4>
                        <p>
                            To express the aforementioned conditional situations in which certain APIs are made available due to expressed manifest keys or permissions, the new WebIDL extended attribute <code>"<a href="https://developer.mozilla.org/en-US/docs/Mozilla/WebIDL_bindings#CheckAnyPermissions">CheckAnyPermissions</a>"</code> is used.
                        </p>
                        <table>
                            <tr><td><b>API object</b></td><td><b>CheckAnyPermissions Value</b></td><td><b>Manifest Key or Value</b></td></tr>
                            <tr><td>browser</td><td>"browserExt"</td><td>N/A</td></tr>
                            <tr><td>browser.browserAction</td><td>"browserExtBrowserAction"</td><td>"browserAction":[...]</td></tr>
                            <tr><td>browser.contextMenu</td><td>"browserExtContextMenus"</td><td>"permissions":["contextMenus"]</td></tr>
                            <tr><td>browser.extension</td><td>"browserExt"</td><td><p></p></td></tr>
                            <tr><td>i18n</td><td>"browserExt"</td><td>"default_language": "&lt;code&gt;"</td></tr>
                            <tr><td>pageAction</td><td>"browserExtPageAction"</td><td>"pageAction":[...]</td></tr>
                            <tr><td>runtime</td><td>"browserExt"</td><td><p></p></td></tr>
                            <tr><td>tabs</td><td>"browserExtTabs"</td><td>"permissions":["tabs"] or<br />"permissions":["activeTab"]</td></tr>
                            <tr><td>webNavigation</td><td>"browserExtWebNavigation"</td><td>"permissions":["webNavigation"]</td></tr>
                            <tr><td>webRequest</td><td>"browserExtWebRequest"</td><td>"permissions":["webRequest"]</td></tr>
                            <tr><td>windows</td><td>"browserExt"</td><td><p></p></td></tr>

                        </table>
                    </section>
                    <section class="example">
                        <h4>Example: <code>browser.i18n</code></h4>
                        <p>
                            In this example, the <code>i18n</code> API should be made available to both browser host scripts (background, event, popup, options, etc.) and content scripts. Use of this API does not require a manifest permission declaration. Additionally, however, the manifest does require a value (<code>default_locale</code>) that is necessary and cannot be specified by the extension author in script code. This is expressed as a <code>BrowserExtManifest</code> dictionary. </p>
                        <p>NOTE: To avoid naming conflicts with WebIDL definitions elsewhere in this document, the Example below has an underscore ("_") appended to end of interface names. In the actual definitions elsewhere in this document, the underscore character is not used.
                        </p>
                        <ol>
                            <li>
                                First, declare the methods for the <code>browser.i18n</code> object.

<pre class="idl">
[NoInterfaceObject]
interface BrowserExtI18n_ {
    DOMString getMessage_(DOMString messageName, sequence&lt;DOMString?&gt; substitutions);
};
</pre>
                            </li>
                            <li>
                                Next, we specify the available contexts ("Window" for background/event/popup/options...) and "ContentScript" for the content context.

<pre class="idl">
[NoInterfaceObject, Exposed=(Window,ContentScript)] 
interface BrowserExtI18nAPI_ {
    readonly attribute BrowserExtI18n_ i18n;
};
                        </pre>
                            </li>
                            <li>
                                Connect the <code>i18n</code> object to the <code>browser.*</code> object.

<pre class="idl">
Browser implements BrowserExtI18nAPI_;
</pre>
                            </li>
                            <li>
                                Finally, we express the locale from manifest.json. For example <code>"default_locale": "en"</code>

<pre class="idl">
partial dictionary BrowserExtManifest_ {
    DOMString? defaultLocaleValue;
};
</pre>
                            </li>
                        </ol>

                        <section class="introductory" style="display:none;">
                            <h4> Definitions</h4>
                            <dl>
                                <dt> <dfn>BrowserExtI18n_</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtI18n_">getMessage_</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtI18nAPI_</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtI18nAPI_">i18n</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtManifest_</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtManifest_">defaultLocaleValue</dfn></dt>
                                <dd> is TBD_define_here</dd>
                            </dl>
                        </section>

                    </section>
                </section>

            </section>

        <section>
            <h3>Events</h3>
            <section  >
                <h4>Overview</h4>
                <p>
                    Extension events are similar to DOM Events [<a href="https://www.w3.org/TR/dom/">DOM4</a>]. However, extension events are dispatched only to objects in the relevant extension scope (background, event, options, content, etc.). Script in the extension scope can observe events by calling <code>addListener()</code>.
                </p>
                <pre class="def idl">
[NoInterfaceObject]
dictionary BrowserExtRule {
    DOMString id;
    sequence&lt;DOMString&gt; tags;
    sequence&lt;Any&gt; conditions;
    sequence&lt;Any&gt; actions;
    long priority;
};
[NoInterfaceObject, Exposed=(Window,ContentScript), CheckAnyPermissions_browserExt_]
interface BrowserExtEvent {
    void    addListener(Function callback);
    void    removeListener(Function callback);
    boolean hasListener(Function callback);
    boolean hasListeners();
};
</pre>

                      <section class="introductory">
                            <h4> Definitions</h4>
                            <dl>
                                <dt><dfn>BrowserExtRule</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn data-dfn-for="BrowserExtRule">id</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn data-dfn-for="BrowserExtRule">tags</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn data-dfn-for="BrowserExtRule">conditions</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn data-dfn-for="BrowserExtRule">actions</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn data-dfn-for="BrowserExtRule">priority</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn>BrowserExtEvent</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn data-dfn-for="BrowserExtEvent">addListener</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn data-dfn-for="BrowserExtEvent">removeListener</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn data-dfn-for="BrowserExtEvent">hasListener</dfn></dt><dd> is TBD_define_here</dd>
                                <dt><dfn data-dfn-for="BrowserExtEvent">hasListeners</dfn></dt><dd> is TBD_define_here</dd>
                          </dl>
                    </section>
                </section>
        </section>

        <section>
            <h3 id="coreapis">The <code>browser</code> object</h3>
            <section class="introductory">
                <h4>Overview</h4>
                <p>
                    The core Browser Extension API objects are accessible from the <code>browser</code> object. Their availability varies, depending on conditions outlined in the <a href="#apiavailability">API Availability</a> section.
                </p>
                <ul>
                    <li>browserAction</li>
                    <li>contextMenus</li>
                    <li>extension</li>
                    <li>i18n</li>
                    <li>pageAction</li>
                    <li>runtime</li>
                    <li>tabs</li>
                    <li>webNavigation</li>
                    <li>webRequest</li>
                    <li>windows</li>
                </ul>
            </section>
            <section class="introductory">
                <h4>Context</h4>
                <p>
                    This API is available in Window context (background, event, popup, options and custom pages), Content Script context, and Internet-hosted web page context.
                </p>
            </section>
            <section class="introductory">
                <h4>WebIDL Definition</h4>
                <p>
                    A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
                </p>

<pre class="def idl">
[CheckAnyPermissions_browserExt_]
interface BrowserExtGlobal {
    readonly attribute Browser browser;
};
Window implements BrowserExtGlobal;

[NoInterfaceObject] 
interface Browser { 
};
dictionary BrowserExtIcon {
    DOMString path;
    DOMString size;
};
typedef sequence&lt;BrowserExtIcon&gt; BrowserExtIconArray;
dictionary BrowserExtDeveloper {
    DOMString name;
    DOMString? url;
};
dictionary BrowserExtBrowserOrPageAction {
    BrowserExtIcon? defaultIcon; 
    DOMString? defaultPopup;
    DOMString? defaultTitle;
};
dictionary BrowserExtKeyValue {
    DOMString key;
    DOMString? value;
};
dictionary BrowserExtBrowserSpecificSettings {
    DOMString browserName;
    sequence&lt;BrowserExtKeyValue&gt; keyValue;
};
dictionary BrowserExtBackroundOrEvent {
    DOMString? page;
    boolean persistent;
    sequence&lt;DOMString&gt;? scripts;
};
dictionary BrowserExtContentScripts {
    boolean allFrames;
    sequence&lt;DOMString&gt;? css;
    sequence&lt;DOMString&gt;? excludeMatches;
    sequence&lt;DOMString&gt;? js;
    sequence&lt;DOMString&gt; matches;
    DOMString? runAt;
};
dictionary BrowserExtManifest {
    BrowserExtBackroundOrEvent? background;
    BrowserExtBrowserOrPageAction? browserAction;
    BrowserExtBrowserSpecificSettings? browserSpecificSettings;
    BrowserExtContentScripts? contentScripts;
    DOMString? contentSecurityPolicy;
    DOMString? defaultLocale;
    DOMString? description;
    BrowserExtDeveloper? developer;
    BrowserExtIconArray? icons;
    DOMString? manifestVersion;
    DOMString name;
    DOMString? optionsPage;
    BrowserExtBrowserOrPageAction? pageAction;
    sequence&lt;DOMString&gt;? permissions;
    sequence&lt;DOMString&gt;? requiredKeys;
    DOMString? version;
    sequence&lt;DOMString&gt; webAccessibleResources;
};
</pre>
                <section class="introductory">
                    <h4> Definitions</h4>
                    <dl>
                        <dt> <dfn>BrowserExtGlobal</dfn></dt>
                        <dd>The interface for the main <code>browser</code> object that provides access to all if the child core objects (e.g. <code>browser.browserAction</code>, <code>browser.contextMenus</code>, etc.) and their associated APIs.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtGlobal">browser</dfn></dt>
                        <dd>The core object that provides all of the browser extension APIs.</dd>
                        <dt> <dfn>Browser</dfn></dt>
                        <dd>The interface definition is empty in this section, but each subsequent spec section for the core objects (e.g. BrowserAction, ContextMenus, etc.) includes declarations (e.g. <code>Browser implements BrowserExtBrowserActionAPI</code>) that add the corresponding core objects to the <code>browser></code> object.</dd>
                        <dt> <dfn>BrowserExtIcon</dfn></dt>
                        <dd>Represents information about a graphical image for <code>BrowserAction</code> or <code>PageAction</code> buttons displayed in the browser UI.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtIcon">path</dfn></dt>
                        <dd>Specifies the relative location of the .jpg file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtIcon">size</dfn></dt>
                        <dd>Specifies the width and height of the image in pixels.</dd>
                        <dt> <dfn>BrowserExtIconArray</dfn></dt>
                        <dd>An array of <code>BrowserExtIcon</code> objects.</dd>
                        <dt> <dfn>BrowserExtDeveloper</dfn></dt>
                        <dd>Specifies information about the creator of the extension.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtDeveloper">name</dfn></dt>
                        <dd>Specifies the name or company that created the extension.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtDeveloper">url</dfn></dt>
                        <dd>Specifies the company or product URL for the extension.</dd>
                        <dt> <dfn>BrowserExtBrowserOrPageAction</dfn></dt>
                        <dd>Represents information about either a <code>BrowserAction</code> or <code>PageAction</code>.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtBrowserOrPageAction">defaultIcon</dfn></dt>
                        <dd>The <code>BrowserExtIcon</code> image, if one was specified in the <code>manifest.json</code> file, or <code>null</code> if none is provided.  </dd>
                        <dt> <dfn data-dfn-for="BrowserExtBrowserOrPageAction">defaultPopup</dfn></dt>
                        <dd>The relative path to the page or script to be invoked if one was specified in the <code>manifest.json</code> file, or <code>null</code> if none is provided.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtBrowserOrPageAction">defaultTitle</dfn></dt>
                        <dd>The button (or tooltip) text if specified in the <code>manifest.json</code> file, or <code>null</code> if none is provided.</dd>
                        <dt> <dfn>BrowserExtKeyValue</dfn></dt>
                        <dd>A pair of strings, one representing a lookup "key" (or index) and the other an associated "value".</dd>
                        <dt> <dfn data-dfn-for="BrowserExtKeyValue">key</dfn></dt>
                        <dd>A string lookup "key" (e.g. "color"), which provides access to an associated "value" (e.g. "red").</dd>
                        <dt> <dfn data-dfn-for="BrowserExtKeyValue">value</dfn></dt>
                        <dd>Using an associated lookup "key" (e.g. "color"), this represents the "value" (e.g. "red") for that key.</dd>
                        <dt> <dfn>BrowserExtBrowserSpecificSettings</dfn></dt>
                        <dd>Used for settings specific to a host such as Gecko, Opera, or Edge.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtBrowserSpecificSettings">browserName</dfn></dt>
                        <dd>The browser name that is associated with the settings, such as "geko" or "opera" or "edge".</dd>
                        <dt> <dfn data-dfn-for="BrowserExtBrowserSpecificSettings">keyValue</dfn></dt>
                        <dd>The pair of name and value for a setting that is only applicable to a particular browser.</dd>
                        <dt> <dfn>BrowserExtBackroundOrEvent</dfn></dt>
                        <dd>Represents <code>manifest.json</code> settings for long-running or inter-tab scripts.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtBackroundOrEvent">page</dfn></dt>
                        <dd>Specifies the relative path to the page that is loaded as the Background or Event page.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtBackroundOrEvent">persistent</dfn></dt>
                        <dd>Specifies whether the page is always loaded (true) or is unloaded when not needed (false), such as an idle state.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtBackroundOrEvent">scripts</dfn></dt>
                        <dd>Specifies the relative path to the script that is loaded as the Background or Event page.</dd>
                        <dt> <dfn>BrowserExtContentScripts</dfn></dt>
                        <dd>Represents the collection of information needed to associate script files to be executed when the user navigates the browser to particular URLs.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtContentScripts">allFrames</dfn></dt>
                        <dd>Specifies whether the script should be run for child frames of a page as well as the main page.</code></dd>
                        <dt> <dfn data-dfn-for="BrowserExtContentScripts">css</dfn></dt>
                        <dd>Specifies relative paths to style sheets to be loaded when the matches/exclude_matches and run_at criteria are met.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtContentScripts">excludeMatches</dfn></dt>
                        <dd>Specifies URL patterns for which the content script will <i>not</i> be run.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtContentScripts">js</dfn></dt>
                        <dd>Specifies relative paths to scripts to be run when the matches/exclude_matches and run_at criteria are met.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtContentScripts">matches</dfn></dt>
                        <dd>Specifies URL patterns for which the content script will not be run.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtContentScripts">runAt</dfn></dt>
                        <dd>Specifies when scripts and CSS will be applied (e.g. "document_start" or "document_end").</dd>
                        <dt> <dfn>BrowserExtManifest</dfn></dt>
                        <dd>Represents all of the relevant data provided in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">background</dfn></dt>
                        <dd>Corresponds to the <code>"background": {}</code> key and associated children in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">browserAction</dfn></dt>
                        <dd>Corresponds to the <code>"browser_action": {}</code> key and associated children in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">browserSpecificSettings</dfn></dt>
                        <dd>Corresponds to the <code>"browser_specific_settings": {}</code> key and associated children in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">contentScripts</dfn></dt>
                        <dd>Corresponds to the <code>"content_scripts": {}</code> key and associated children in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">contentSecurityPolicy</dfn></dt>
                        <dd> Corresponds to the <code>"content_security_policy"</code> key/value pair in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">defaultLocale</dfn></dt>
                        <dd>Corresponds to the <code>"default_locale"</code> key/value pair in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">description</dfn></dt>
                        <dd> Corresponds to the <code>"description"</code> key/value pair in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">developer</dfn></dt>
                        <dd> Corresponds to the <code>"developer": {}</code> key and associated children in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">icons</dfn></dt>
                        <dd> Corresponds to the <code>"icons": {}</code> key and associated children in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">manifestVersion</dfn></dt>
                        <dd> Corresponds to the <code>"manifest_version"</code> key/value pair in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">name</dfn></dt>
                        <dd> Corresponds to the <code>"name"</code> key/value pair in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">optionsPage</dfn></dt>
                        <dd> Corresponds to the <code>"options_page"</code> key/value pair in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">pageAction</dfn></dt>
                        <dd> Corresponds to the <code>"page_action": {}</code> key and associated children in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">permissions</dfn></dt>
                        <dd> Corresponds to the <code>"permissions": {}</code> key and associated children in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">requiredKeys</dfn></dt>
                        <dd> Corresponds to the <code>"required_keys": []</code> key and associated children in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">version</dfn></dt>
                        <dd> Corresponds to the <code>"version"</code> key/value pair in the <code>manifest.json</code> file.</dd>
                        <dt> <dfn data-dfn-for="BrowserExtManifest">webAccessibleResources</dfn></dt>
                        <dd> Corresponds to the <code>"web_accesible_resources": {}</code> key/value pair in the <code>manifest.json</code> file.</dd>
                    </dl>
                </section>
            </section>

                <section>
                    <h4 id="browserAction">The <code>browserAction</code> object</h4>
                    <section class="introductory">
                        <h4>Overview</h4>
                        The <code>browserAction</code> object adds an always-visible button to the browser application, usually near the top of the browser application UI in the toolbar area. An extension that declares a <code>browserAction</code> cannot have a <code>pageAction</code>, and vice-versa.
                    </section>
                    <section class="introductory">
                        <h4>Manifest</h4>
                        The <code>"browser_action"</code> and <code>"default_title"</code> keys are required. The other keys are optional.
<pre>
"browser_action": {                               // Required
    "default_icon": {...},                        // Same format as "icons"
    "default_popup": "Page URL",                  // Optional
    "default_title": "Title string"               // Required
}
</pre>
                    </section>
                    <section class="introductory">
                        <h4>Context</h4>
                        <p>
                            This API is available in Window context (background, event, popup, options and custom pages).
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>WebIDL Definition</h4>
                        <p>
                            A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
                        </p>






<pre class="def idl">
dictionary BrowserExtBrowserActionDefaults {
    BrowserExtIconArray? defaultIcon;
    DOMString? defaultPopup;
    DOMString?  defaultTitle;
};
partial dictionary BrowserExtManifest {
        BrowserExtBrowserActionDefaults? browserActionDefaults;
};
typedef sequence&lt;byte&gt; BrowserExtColorArray;
dictionary BrowserExtTabIdDetails {
    long tabId;
};
dictionary BrowserExtBadgeColorArrayTabId {
    BrowserExtColorArray color;
    long tabId;
};
dictionary BrowserExtBadgePathTabId {
    DOMString path;
    long tabId;
};
dictionary BrowserExtBadgeTextTabId {
    long tabId;
    DOMString text;
};
dictionary BrowserExtBadgeTabIdPopup {
    DOMString popupHTMLFileName;
    long tabId;
};
callback BrowserExtBrowserActionOnClickedCallback = void (BrowserExtTabsTab tab);
[NoInterfaceObject]
interface BrowserExtBrowserAction {
    void disable(long tabId);
    void enable(long tabId);
    Promise&lt;BrowserExtColorArray&gt; getBadgeBackgroundColor(BrowserExtTabIdDetails details);
    Promise&lt;DOMString?&gt; getBadgeText(BrowserExtTabIdDetails details);
    Promise&lt;DOMString?&gt; getPopup(BrowserExtTabIdDetails details);
    BrowserExtEvent onClicked(BrowserExtBrowserActionOnClickedCallback callback);
    void setBadgeBackgroundColor(BrowserExtBadgeColorArrayTabId details);
    void setBadgeText(BrowserExtBadgeTextTabId details);
    Promise&lt;void&gt; setIcon(BrowserExtBadgePathTabId details);
    void setPopup(BrowserExtBadgeTabIdPopup details);
};
[NoInterfaceObject, Exposed=Window, CheckAnyPermissions_browserExtBrowserAction_]
interface BrowserExtBrowserActionAPI {
    readonly attribute BrowserExtBrowserAction browserAction; 
};
Browser implements BrowserExtBrowserActionAPI;
</pre>
                        <section class="introductory">
                            <h4> Definitions</h4>
                            <dl>
                                <dt> <dfn>BrowserExtBrowserActionDefaults</dfn></dt>
                                <dd>Represents the initial state of the BrowserAction button, as specified by values in the <code>manifest.json</code> file.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserActionDefaults">defaultIcon</dfn></dt>
                                <dd>The initial image to be displayed for the BrowserAction button in the browser UI, as specified by values in the <code>manifest.json</code> file. </dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserActionDefaults">defaultPopup</dfn></dt>
                                <dd>The relative path to the page to be displayed when the BrowserAction button is clicked, as specified by values in the <code>manifest.json</code> file.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserActionDefaults">defaultTitle</dfn></dt>
                                <dd>The initial text string to be displayed with the BrowserAction button in the browser UI, as specified by values in the <code>manifest.json</code> file.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtManifest">browserActionDefaults</dfn></dt>
                                <dd>Object that represents the initial state of the BrowserAction button, as specified by values in the <code>manifest.json</code> file.</dd>
                                <dt> <dfn>BrowserExtColorArray</dfn></dt>
                                <dd>RGBA for the BrowserAction button's color.</dd>
                                <dt> <dfn>BrowserExtTabIdDetails</dfn></dt>
                                <dd>An object that is passed as a parameter to many <code>browser.browserAction</code> methods. The object encapsulates the information needed to execute the associated method.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabIdDetails">tabId</dfn></dt>
                                <dd>The numeric integer ID representing the tab of interest.</dd>
                                <dt> <dfn>BrowserExtBadgeColorArrayTabId</dfn></dt>
                                <dd> An object that is returned as a Promise from calls to the <code>browser.getBadgeBackgroundColor</code> methods.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBadgeColorArrayTabId">color</dfn></dt>
                                <dd> The RGBA color of the BrowserAction button's background.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBadgeColorArrayTabId">tabId</dfn></dt>
                                <dd>The numeric integer ID for the associated tab.</dd>
                                <dt> <dfn>BrowserExtBadgePathTabId</dfn></dt>
                                <dd>An object that is passed as a parameter to the <code>browserAction.setIcon()</code> method. </dd>
                                <dt> <dfn data-dfn-for="BrowserExtBadgePathTabId">path</dfn></dt>
                                <dd>The relative path to the image to be displayed in the BrowserAction button in the UI.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBadgePathTabId">tabId</dfn></dt>
                                <dd>The numeric integer ID for the associated tab.</dd>
                                <dt> <dfn>BrowserExtBadgeTextTabId</dfn></dt>
                                <dd> An object that is passed as a parameter to the <code>browserAction.setBadgeText()</code> method. </dd>
                                <dt> <dfn data-dfn-for="BrowserExtBadgeTextTabId">tabId</dfn></dt>
                                <dd> The numeric integer ID for the associated tab.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBadgeTextTabId">text</dfn></dt>
                                <dd>The text string to be displayed in the BrowserAction button in the UI.</dd>
                                <dt> <dfn>BrowserExtBadgeTabIdPopup</dfn></dt>
                                <dd> An object that is passed as a parameter to the <code>browserAction.setPopup()</code> method.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBadgeTabIdPopup">popupHTMLFileName</dfn></dt>
                                <dd> The relative path to the page to be displayed when the BrowserAction button in the UI is activated.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBadgeTabIdPopup">tabId</dfn></dt>
                                <dd> The numeric integer ID for the associated tab.</dd>
                                <dt> <dfn>BrowserExtBrowserActionOnClickedCallback</dfn></dt>
                                <dd>This callback handles the <code>browserAction.onClicked()</code> event.</dd>
                                <dt> <dfn>BrowserExtBrowserAction</dfn></dt>
                                <dd> The definition for the <code>browser.browserAction</code> object.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">disable</dfn></dt>
                                <dd>Indicates that the browser should alter the BrowserAction button in the browser UI so that it cannot be activated, typically visually changing the UI as well to indicate this state to users. </dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">enable</dfn></dt>
                                <dd>Indicates that the browser should alter the BrowserAction button in the browser UI so that it can be activated, typically visually changing the UI as well to indicate this state to users. </dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">getBadgeBackgroundColor</dfn></dt>
                                <dd>Returns the color of background for the BrowserAction button in the UI.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">getBadgeText</dfn></dt>
                                <dd>Returns the UI string for the BrowserAction button badge text.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">getPopup</dfn></dt>
                                <dd> Returns the relative path to the page to be displayed when the user actives the BrowserAction in the browser UI.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">onClicked</dfn></dt>
                                <dd> The event that fires when the user activates the BrowserAction button.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">setBadgeBackgroundColor</dfn></dt>
                                <dd> Specifies a new color to be displayed in the as the background for the BrowserAction button in the browser UI.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">setBadgeText</dfn></dt>
                                <dd> Specifies a new text string to be displayed in the BrowserAction button in the browser UI.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">setIcon</dfn></dt>
                                <dd> Specifies a new image to be displayed in the BrowserAction button in the browser UI.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserAction">setPopup</dfn></dt>
                                <dd> Specifies the relative path to the page to be displayed when the user actives the BrowserAction in the browser UI.</dd>
                                <dt> <dfn>BrowserExtBrowserActionAPI</dfn></dt>
                                <dd> The interface for the <code>browser.browserAction</code> object.</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserActionAPI">browserAction</dfn></dt>
                                <dd> The <code>browser.browserAction</code> object.</dd>
                            </dl>
                        </section>
                    </section>
                </section>


                <section>
                    <h4 id="contextMenus">The <code>contextMenus</code> object</h4>
                    <section class="introductory">
                        <h4>Overview</h4>
                        <p>
                            The <code>contextMenus</code> object allows additional entries to be added to the browser's context menu. The menu will be selectively be shown for various browser UI elements (browser action or page action button) or page elements (frame, image, link, page, selection, etc.).
                        </p>
                    </section><section class="introductory">
                        <h4>Manifest</h4>
                        <p>
                            A <code>"contextMenus"</code> entry MUST be declared in the <code>"permissions"</code> key. The icon keys are optional.
                        </p>
<pre>
"permissions": [                                  // Required
    "contextMenus"                                // Required
],                                                // Required
"icons": {                                        // Optional
    "&lt;size&gt;":"&lt;name.png&gt;"                         // Optional, size 16 recommended
}                                                 // Optional
</pre>
                    </section><section class="introductory">
                        <h4>Context</h4>
                        <p>
                            This API is available in Window context (background, event, popup, options and custom pages).
                        </p>
                    </section><section class="introductory">
    <h4>WebIDL Definition</h4>
    <p>
        A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
    </p>
<pre class="def idl">
enum BrowserExtContextType { "all", "audio", "browser_action", "editable", "frame", "image", "link", "page", "page_action", "selection", "video" };
enum BrowserExtItemType { "checkbox","normal","radio","separator" };
dictionary BrowserExtContextMenuCreateDetails {
    boolean checked;
    sequence&lt;ContextType&gt;? contexts;
    sequence&lt;DOMString&gt;? documentUrlPatterns;
    boolean enabled;
    DOMString? id;
    Function onclick;
    (long or DOMString?) parentId;
    sequence&lt;DOMString&gt;? targetUrlPatterns;
    DOMString? title;
    DOMString? type;
};
dictionary BrowserExtContextMenuUpdateDetails {
    boolean checked;
    sequence&lt;BrowserExtContextType&gt;? contexts;
    sequence&lt;DOMString&gt;? documentUrlPatterns;
    boolean enabled;
    Function onclick;
    long parentId;
    sequence&lt;DOMString&gt;? targetUrlPatterns;
    DOMString? title;
    ItemType? type;
};
dictionary BrowserExtContextMenuOnClickedDetails {
    boolean checked;
    boolean editable;
    long frameId;
    DOMString? frameUrl;
    DOMString? linkUrl;
    DOMString? mediaType;
    (long or DOMString) menuItemId;
    DOMString? pageUrl;
    (long or DOMString?) parentMenuItemId;             
    DOMString? selectionText;
    DOMString? srcUrl;
    boolean wasChecked;
};
callback BrowserExtContextMenuOnClickedCallback = void (BrowserExtContextMenuOnClickedDetails details, BrowserExtTabsTab tab);
[NoInterfaceObject]
interface BrowserExtContextMenus {
    Promise&lt;long&gt; create(BrowserExtContextMenuCreateDetails details);
    BrowserExtEvent onClicked_TBD(BrowserExtContextMenuOnClickedCallback callback);
	Promise&lt;void&gt; remove((long or DOMString) itemId);
    Promise&lt;void&gt;  removeAll();
    Promise&lt;void&gt;  update((long or DOMString) itemId, BrowserExtContextMenuUpdateDetails details);
};
[NoInterfaceObject, Exposed=Window, CheckAnyPermissions_browserExtContextMenus_]
interface BrowserExtContextMenusAPI {
    readonly attribute BrowserExtContextMenus contextMenus; 
};
Browser implements BrowserExtContextMenusAPI;
</pre>
    <section class="introductory">
        <h4> Definitions</h4>
        <dl>
            <dt> <dfn>BrowserExtContextType</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">all</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">audio</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">browser_action</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">editable</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">frame</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">image</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">link</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">page</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">page_action</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">selection</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextType">video</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn>BrowserExtItemType</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtItemType">checkbox</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtItemType">normal</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtItemType">radio</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtItemType">separator</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn>BrowserExtContextMenuCreateDetails</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">checked</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">contexts</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">documentUrlPatterns</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">enabled</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">id</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">onclick</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">parentId</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">targetUrlPatterns</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">title</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuCreateDetails">type</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn>BrowserExtContextMenuUpdateDetails</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuUpdateDetails">checked</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuUpdateDetails">contexts</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuUpdateDetails">documentUrlPatterns</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuUpdateDetails">enabled</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuUpdateDetails">onclick</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuUpdateDetails">parentId</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuUpdateDetails">targetUrlPatterns</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuUpdateDetails">title</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuUpdateDetails">type</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn>BrowserExtContextMenuOnClickedDetails</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">checked</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">editable</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">frameId</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">frameUrl</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">linkUrl</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">mediaType</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">menuItemId</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">pageUrl</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">parentMenuItemId</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">selectionText</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">srcUrl</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenuOnClickedDetails">wasChecked</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn>BrowserExtContextMenuOnClickedCallback</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn>BrowserExtContextMenus</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenus">create</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenus">onClicked_TBD</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenus">remove</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenus">removeAll</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenus">update</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn>BrowserExtContextMenusAPI</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtContextMenusAPI">contextMenus</dfn></dt>
            <dd> is TBD_define_here</dd>
        </dl>
    </section>

    </section>
</section>


                <section>
                    <h4 id="i18n">The <code>i18n</code> object</h4>
                    <section class="introductory">
                        <h4>Overview</h4>
                        <p>
                            The <code>i81n</code> object provides a way to access strings that have been localized into supported languages.
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>Manifest</h4>
                        <p>
                            When providing localized strings, you MUST specify a default locale using a two-character code. Codes can be found at <a href="http://www.w3.org/TR/1999/REC-html401-19991224/struct/dirlang.html">RFC1766</a> or <a href="http://www.w3.org/International/articles/language-tags/">IETF BCP47</a>. When localizing manifest strings, the following syntax is used.
                        </p>
<pre>
"default_locale" : "&lt;twoCharLocaleCode&gt;",              // Required
"name" : "__MSG_&lt;yourCustomNameStringIdentifier&gt;__",
"description" : "__MSG_&lt;yourCustomDescriptionStringIdentifier&gt;__",
</pre>
                        For example
                        <pre>
"default_locale" : "en",              // English
"name" : "__MSG_MySampleExtension__",
"description" : "__MSG_MySampleExensionDecription__",
</pre>
                    </section>
                    <section class="introductory">
                        <h4>Localized Strings</h4>
                        <p>
                            Each supported locale MUST have its own <code>messages.json</code> file stored in the folder <code>_locales/&lt;twoCharLocaleCode&gt;</code>. The two-character codes used for directory names here the same as are used in the <code>mainfest.json</code> to specify <code>default_locale</code>.
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>Locale Codes and Matching</h4>
                        <p>Locale codes used in file/directory names and returned by the API, contrary to common standards, are in the form:</p>
                        <code> &lt;language&gt;[_&lt;region&gt;] </code>
                        <p>
                            Which is to say, a two-letter language code, optionally followed by an underscore and a two-letter region code.
                            Locale codes are matched such that an exact match is used if available, falling back to the least-specific, closest match. Therefore, for "en_US", the following locales would be chosen, in order of preference:
                        </p>
                        <ul>
                            <li>en_US</li>
                            <li>en_US_var</li>
                            <li>en</li>
                            <li>en_GB</li>
                            <li>en_GB_var</li>
                        </ul>
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>String tokens</h4>
                        <p>Strings are localized by pre-processing messages, replacing <code>|$[a-zA-Z0-9@_]+$|</code> tokens with the value of their replacements. Later, it processes the resulting string for <code>|$[0-9]|</code> replacements.<p>
                        <p>Any number of sequential |$|s are permitted, and are replaced with that number minus 1. Instances of <code>|$|</code> followed by any number of sequential digits is also permitted, but a localized string which provides more than 9 substitutions are ignored.</p>
                    </section>

                    <section class="introductory">
                        <h4>Locale Message Replacement</h4>
                        <p>
                            Locale messages in the form <code>__MSG_&lt;message name&gt;_</code> are automatically replaced with the appropriate localized message in CSS files and certain manifest.json string values.
                            Specifically, the replacements are done according to the regular expression <code>__MSG_([A-Za-z0-9@_]+?)__</code>, meaning that the first occurrence of __ terminates the message name immediately.
                        </p>
                        <p>
                            CSS files are pre-processed as a raw text stream, with no considerations for CSS syntax.
                            <code>manifest.json</code> values are processed after the JSON has been parsed, and the results are always treated as literal strings. The following manifest keys are processed for localization messges:
                        </p>
                        <ul>
                            <li>name</a>
                            <li>short_name</a>
                            <li>description</a>
                            <li>author</a>
                            <li>homepage_url</a>
                            <li>developer.name</a>
                            <li>developer.url</a>
                            <li>browser_action.default_title</a>
                            <li>browser_action.default_url</a>
                            <li>page_action.default_title</a>
                            <li>page_action.default_url</a>
                        </ul>
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>Placeholders</h4>
                        <p>It is possible for a translated string to contain substrings that will not be translated or will be replaced with variable content. For example</p>
                        <pre>
"messageExample": {
    "message": "You clicked $URL$.",
    "description": "Tells the user which link they clicked.",
    "placeholders": {
      "url" : {
        "content" : "$1"
        "example" : "https://www.w3c.org"
      }
</pre>
                        <p>The placeholder <code>name</code> ("url" in the above example) is used to represent the placeholder in the substitution string (e.g. "url" becomes $URL$). It is case insensitive and can contain the same characters as a message string name.</p>
                        <p>The <code>"content"</code> item defines the content of the placeholder. This can be a hardcoded string, such as "My placeholder", but it can also include values obtained from a i18n.getMessage() call. </p>
                        <p>The optional <code>"example"</code> item is intended to help translators by showing them an example of how the placeholder would appear to end users, allowing them to make the best choice when localizing the file.</p>
                    </section>
                    <section class="introductory">
                        <h4>Predefined messages</h4>
                        <p>Predefined messages are accessed in the same way as other messages. The syntax for standard messages is:</p>
                        <code>__MSG_extensionName__</code>
                        <p>Predefined messages use exactly the same syntax, except with @@ before the message name. For example:</p>
                        <code>__MSG_@@ui_locale__</code>
                        <p>The following table shows the different available predefined messages:</p>
                        <table>
                            <tr><td><b>Message name</b></td><td><b>Description</b></td></tr>
                            <tr><td>@@extension_id</td><td>The extension or app ID; you might use this string to construct URLs for resources inside the extension. Even unlocalized extensions can use this message. Note that you can't use this message in a manifest file.</td></tr>
                            <tr><td>@@ui_locale</td><td>The current locale; you might use this string to construct locale-specific URLs.</td></tr>
                            <tr><td>@@bidi_dir</td><td>The text direction for the current locale, either "ltr" for left-to-right languages such as English or "rtl" for right-to-left languages such as Arabic.</td></tr>
                            <tr><td>@@bidi_reversed_dir</td><td>If the @@bidi_dir is "ltr", then this is "rtl"; otherwise, it's "ltr".</td></tr>
                            <tr><td>@@bidi_start_edge</td><td>If the @@bidi_dir is "ltr", then this is "left"; otherwise, it's "right".</td></tr>
                            <tr><td>@@bidi_end_edge</td><td>If the @@bidi_dir is "ltr", then this is "right"; otherwise, it's "left".</td></tr>
                        </table>
                    </section>
                    <section class="introductory">
                        <h4>Context</h4>
                        <p>
                            This API is available in Window context (background, event, popup, options and custom pages) and Content Script context.
                        </p>
                    </section><section class="introductory">
    <h4>WebIDL Definition</h4>
    <p>
        A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
    </p>

<pre class="def idl">    
[NoInterfaceObject]
interface BrowserExtI18n {
    DOMString getMessage(DOMString messageName, sequence&lt;DOMString?&gt;? substitutions);
};
[NoInterfaceObject, Exposed=(Window,ContentScript), CheckAnyPermissions_browserExt_] 
interface BrowserExtI18nAPI {
        readonly attribute BrowserExtI18n i18n;
};
Browser implements BrowserExtI18nAPI;
partial dictionary BrowserExtManifest {
    DOMString? defaultLocaleValue;
};
</pre>
    <section class="introductory">
        <h4> Definitions</h4>
        <dl>
            <dt> <dfn>BrowserExtI18n</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtI18n">getMessage</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn>BrowserExtI18nAPI</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtI18nAPI">i18n</dfn></dt>
            <dd> is TBD_define_here</dd>
            <dt> <dfn data-dfn-for="BrowserExtManifest">defaultLocaleValue</dfn></dt>
            <dd> is TBD_define_here</dd>
        </dl>
    </section>
                

    </section>
</section>

                <section>
                    <h4 id="pageAction">The <code>pageAction</code> object</h4>
                    <section class="introductory">
                        <h4>Overview</h4>
                        <p>
                            The <code>pageAction</code> object adds a button to the browser application, usually within the address bar. This button typically appears only when the extension has detected that it can perform an action on the current page for the active tab. An extension that declares a <code>browserAction</code> cannot have a <code>pageAction</code>, and vice-versa.
                        </p>
                    </section><section class="introductory">
                        <h4>Manifest</h4>
                        <p>
                            The <code>"page_action"</code> and <code>"default_title"</code> keys are required. The other keys are optional.
                        </p>
<pre>
"page_action": {                               // Required
    "default_icon": {...},                        // Same format as "icons"
    "default_popup": "Page URL",                  // Optional
    "default_title": "Title string"               // Required
}
</pre>
                    </section>
                    <section class="introductory">
                        <h4>Context</h4>
                        <p>
                            This API is available in Window context (background, event, popup, options and custom pages).
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>WebIDL Definition</h4>
                        <p>
                            A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
                        </p>

<pre class="def idl">
dictionary BrowserExtPageActionDefaults {
    BrowserExtIconArray? defaultIcon;
    DOMString? defaultPopup;
    DOMString?  defaultTitle;
};
partial dictionary BrowserExtManifest {
    BrowserExtPageActionDefaults? pageActionDefaults;
};
dictionary BrowserExtBadgePath {
    DOMString path;
};
callback BrowserExtPageActionOnClickedCallback = void (BrowserExtTabsTab tab);
interface BrowserExtPageAction {
    Promise&lt;DOMString?&gt; getPopup_TBD(BrowserExtTabIdDetails details);
    Promise&lt;DOMString?&gt; getTitle(BrowserExtTabIdDetails details);
    void hide(long tabId);
    BrowserExtEvent onClicked_TBD2(BrowserExtPageActionOnClickedCallback callback);
    Promise&lt;void&gt; setIcon_TBD(BrowserExtBadgePath path);
    void setPopup_TBD(BrowserExtBadgePathTabId details);
    void setTitle(BrowserExtBadgeTextTabId details);
    void show(long tabId);
};
[NoInterfaceObject, Exposed=Window, CheckAnyPermissions_browserExtPageAction_]
interface BrowserExtPageActionAPI {
    readonly attribute BrowserExtPageAction pageAction; 
};
Browser implements BrowserExtPageActionAPI;
</pre>
                        <section class="introductory">
                            <h4> Definitions</h4>
                            <dl>
                                <dt> <dfn>BrowserExtPageActionDefaults</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageActionDefaults">defaultIcon</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageActionDefaults">defaultPopup</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageActionDefaults">defaultTitle</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtManifest">pageActionDefaults</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtBadgePath</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBadgePath">path</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtPageActionOnClickedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtPageAction</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageAction">getPopup_TBD</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageAction">getTitle</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageAction">hide</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageAction">onClicked_TBD2</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageAction">setIcon_TBD</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageAction">setPopup_TBD</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageAction">setTitle</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageAction">show</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtPageActionAPI</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtPageActionAPI">pageAction</dfn></dt>
                                <dd> is TBD_define_here</dd>
                            </dl>
                            </section>
                        </section>
                    </section>

                <section>
                    <h4 id="runtime">The <code>runtime</code> object</h4>
                    <section class="introductory">
                        <h4>Overview</h4>
                        <p>
                            The <code>runtime</code> object is used to send and receive messages across contexts, as well as access extension-level information such as the id, manifest, and absolute path to resources.
                        </p>
                    </section><section class="introductory">
                        <h4>Manifest</h4>
                        <p>
                            There are no additional manifest entries required for an extension to use this object. However, an extension will only receive messages sent from hosted web pages if the “externally_connectable” key is declared. Also, an extension will block messages from other extensions by specifying only approved extensions. Note that if this key is used to allow web pages to send messages, unless <code>"ids" : ["*"]</code> is specified, all messages from other extensions will be blocked. URLs in the <code>"matches"</code> array MUST include a top-level domain. This list does not affect content scripts.
                        </p>
<pre>
"externally_connectable" : [
    "ids":[...], // Identifiers for other extensions that are allowed to send messages
    "matches":[...] // URL patterns for hosted web pages allowed to send messages 
    ]
</pre>
                    </section>
                    <section class="introductory">
                        <h4>Context</h4>
                        <p>
                            This API is available in Window context (background, event, popup, options and custom pages), Content Script context, and Internet-hosted web page context.
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>WebIDL Definition</h4>
                        <p>
                            A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
                        </p>

<pre class="def idl">
enum BrowserExtRuntimeOnInstalledReason {"browser_update", "extension_install", "extension_update"};
dictionary BrowserExtRuntimeOnInstalledDetails {
    BrowserExtRuntimeOnInstalledReason reason;
    DOMString? previousVersion;
    DOMString? id;
};
dictionary BrowserExtRuntimePort {
    Function disconnect;
    DOMString name;
    object onDisconnect;
    object onMessage;
    Function postMessage;
    BrowserExtRuntimeMessageSender? sender;
};
dictionary BrowserExtRuntimeMessageSender {
    DOMString? id;
    long frameId;
    BrowserExtTabsTab? tab;
    DOMString? url;
};
callback BrowserExtRuntimeOnConnectCallback = void (BrowserExtRuntimePort port);
callback BrowserExtRuntimeOnInstalledCallback = void (BrowserExtRuntimeOnInstalledDetails details);
callback BrowserExtRuntimeOnMessageCallback = void (optional any message, BrowserExtRuntimeMessageSender sender, BrowserExtRuntimeSendResponseCallback callback);
[NoInterfaceObject]
interface BrowserExtBrowserRuntime {
    object getManifest();
    DOMString getURL(DOMString path);
    attribute DOMString id;
    void onConnect(BrowserExtRuntimeOnConnectCallback callback);
    void onInstalled(BrowserExtRuntimeOnInstalledCallback callback);
    void onMessage(BrowserExtRuntimeOnMessageCallback callback);
    Promise&lt;any&gt; sendMessage(optional DOMString extensionId, any message);
    attribute BrowserExtRuntimePort Port;
    attribute BrowserExtRuntimeMessageSender MessageSender;
};
[NoInterfaceObject, Exposed=Window, CheckAnyPermissions_browserExt_]
interface BrowserExtRuntimeAPI {
    readonly attribute BrowserExtRuntime runtime; 
};
Browser implements BrowserExtRuntimeAPI;
</pre>
                        <section class="introductory">
                            <h4> Definitions</h4>
                            <dl>
                                <dt> <dfn>BrowserExtRuntimeOnInstalledReason</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeOnInstalledReason">browser_update</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeOnInstalledReason">extension_install</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeOnInstalledReason">extension_update</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtRuntimeOnInstalledDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeOnInstalledDetails">reason</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeOnInstalledDetails">previousVersion</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeOnInstalledDetails">id</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtRuntimePort</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimePort">disconnect</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimePort">name</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimePort">onDisconnect</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimePort">onMessage</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimePort">postMessage</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimePort">sender</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtRuntimeMessageSender</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeMessageSender">id</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeMessageSender">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeMessageSender">tab</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeMessageSender">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtRuntimeOnConnectCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtRuntimeOnInstalledCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtRuntimeOnMessageCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtBrowserRuntime</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserRuntime">getManifest</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserRuntime">getURL</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserRuntime">id</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserRuntime">onConnect</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserRuntime">onInstalled</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserRuntime">onMessage</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserRuntime">sendMessage</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserRuntime">Port</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserRuntime">MessageSender</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtRuntimeAPI</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRuntimeAPI">runtime</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                </dl>
                            </section>
                        </section>
                    </section>

                <section>
                    <h4 id="tabs">The <code>tabs</code> object</h4>
                    <section class="introductory">
                        <h4>Overview</h4>
                        <p>
                            The <code>tabs</code> object is used to access metadata about a tab, such as its title, or to access the current content within the tab itself.
                        </p>
                    </section><section class="introductory">
                        <h4>Manifest</h4>
                        <p>
                            The <code>"tabs"</code> permission is required to use this object.
                        </p>
<pre>
{
    "permissions": [                               // Required
        "tabs"                                     // Either "tabs" or "activeTab" is required
        "activeTab"                                // Either "tabs" or "activeTab" is required
    ]                                              // Required   
}
</pre>
                    </section>
                    <section class="introductory">
                        <h4>Context</h4>
                        <p>
                            This API is available in Window context (background, event, popup, options and custom pages).
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>WebIDL Definition</h4>
                        <p>
                            A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
                        </p>


                        <pre class="def idl">
enum BrowserExtTabMutedReasonDetails { "user", "capture", "extension" };
enum BrowserExtRunAt { "document_end", "document_idle", "document_start" };
enum BrowserExtTabStatus { "complete", "loading" };
enum BrowserExtWindowTypes { "app", "normal", "panel", "popup" };
enum BrowserExtTabsCaptureVisibleTabFormat { "jpeg", "png" };
dictionary BrowserExtTabsTab {
    boolean active;
    boolean audible;
    DOMString? favIconUrl;
    boolean highlighted;
    long height;
    long id;
    boolean incognito;
    long index;
    TabMutedDetails? mutedDetails;
    long openerTabId;
    boolean pinned;
    DOMString? sessionId;
    DOMString? status;
    DOMString? title;
    DOMString? url;
    long width;
    long windowId;
};
dictionary BrowserExtTabMutedDetails {
    DOMString? extensionId;
    boolean muted;
    TabMutedReasonDetails? reason;
};
dictionary BrowserExtTabConnectDetails {
    long frameId;
    DOMString? name;
};
dictionary BrowserExtTabCreateDetails {
    boolean active;
    long index;
    long openerTabId;
    boolean pinned;
    DOMString? url;
    long windowId;
};
dictionary BrowserExtTabScriptAndCSSDetails {
    boolean allFrames;
    DOMString? code;
    DOMString? file;
    long frameId;
    boolean matchAboutBlank;
    BrowserExtRunAt? runAt;
};
dictionary BrowserExtTabsCaptureVisibleTabDetails {
    BrowserExtTabsCaptureVisibleTabFormat imageCaptureormat;
    long jpegQuality;
};
dictionary BrowserExtTabQueryDetails {
    boolean active;
    boolean audible;  
    boolean currentWindow;
    boolean highlighted;
    long index;
    boolean lastFocusedWindow;
    boolean muted;
    boolean pinned;
    TabStatus? status;
    DOMString? title;
    (DOMString? or sequence&lt;DOMString&gt;?) url;
    long windowId;
    WindowType? windowType;
};
dictionary BrowserExtTabReloadDetails {
    boolean bypassCache;
};
dictionary BrowserExtTabSendMessageDetails {
    long frameId;
};
dictionary BrowserExtTabUpdateDetails {
    boolean active;
    boolean highlighted;
    boolean muted;
    long openerTabId;
    boolean pinned;
    DOMString? url;
};
dictionary BrowserExtTabIdWindowId {
    long tabId;
    long windowId;
};
dictionary BrowserExtTabsWindowIdIsWindowClosing {
    boolean isWindowClosing;
    long tabId;
};
dictionary BrowserExtTabsOnUpdatedChangeDetails {
    boolean audible;    
    DOMString? favIconUrl;
    TabMutedDetails? mutedDetails;
    boolean pinned;
    DOMString? status;
    DOMString? title;
    DOMString? url;
};
callback BrowserExtTabsOnActivatedCallback = void (BrowserExtTabIdWindowId activeDetails);
callback BrowserExtTabsOnCreatedCallback = void (BrowserExtTabTab tab);
callback BrowserExtTabsOnRemovedCallback = void (BrowserExtTabsWindowIdIsWindowClosing removeDetails);
callback BrowserExtTabsOnUpdatedCallback = void (long tabId, BrowserExtTabsOnUpdatedChangeDetails details, BrowserExtTabsTab tab);
[NoInterfaceObject]
interface BrowserExtBrowserTabs {
    Promise&lt;DOMString&gt; captureVisibleTab(long windowId, BrowserExtTabsCaptureVisibleTabDetails details);
    RuntimePort connect(long tabId, BrowserExtTabConnectDetails details);
    Promise&lt;BrowserExtTabsTab&gt; create(BrowserExtTabCreateDetails details);
    void executeScript(long tabId, BrowserExtTabScriptAndCSSDetails details);
    Promise&lt;BrowserExtTabsTab&gt; get(long tabId);
    Promise&lt;BrowserExtTabsTab&gt; getCurrent();
    void insertCSS(long tabId, BrowserExtTabScriptAndCSSDetails details);
    void onActivated(BrowserExtTabsOnActivatedCallback callback);
    void onCreated(BrowserExtTabsOnCreatedCallback callback);
    void onRemoved(BrowserExtTabsOnRemovedCallback callback);
    void onUpdated(BrowserExtTabsOnUpdatedCallback callback);
    Promise&lt;BrowserExtTabsTab&gt; query(BrowserExtTabQueryDetails queryDetails);
    Promise&lt;void&gt; reload(BrowserExtTabReloadDetails details);
    Promise&lt;void&gt; remove((long or sequence&lt;long&gt;) tabIds);
    Promise&lt;any&gt; sendMessage_TBD(long tabId, any message, optional BrowserExtTabSendMessageOptions details);
    Promise&lt;BrowserExtTabsTab&gt; update(optional long tabId, BrowserExtTabUpdateDetails details);
};
[NoInterfaceObject, Exposed=Window, CheckAnyPermissions_browserExtTabs_]
interface BrowserExtTabsAPI {
readonly attribute BrowserExtTabs tabs; 
};
Browser implements BrowserExtTabsAPI;
</pre>
                        <section class="introductory">
                            <h4> Definitions</h4>
                            <dl>
                                <dt> <dfn>BrowserExtTabMutedReasonDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabMutedReasonDetails">user</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabMutedReasonDetails">capture</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabMutedReasonDetails">extension</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtRunAt</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRunAt">document_end</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRunAt">document_idle</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtRunAt">document_start</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabStatus</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabStatus">complete</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabStatus">loading</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWindowTypes</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowTypes">app</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowTypes">normal</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowTypes">panel</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowTypes">popup</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabsCaptureVisibleTabFormat</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsCaptureVisibleTabFormat">jpeg</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsCaptureVisibleTabFormat">png</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabsTab</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">active</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">audible</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">favIconUrl</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">highlighted</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">height</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">id</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">incognito</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">index</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">mutedDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">openerTabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">pinned</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">sessionId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">status</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">title</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">url</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">width</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsTab">windowId</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabMutedDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabMutedDetails">extensionId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabMutedDetails">muted</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabMutedDetails">reason</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabConnectDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabConnectDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabConnectDetails">name</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabCreateDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabCreateDetails">active</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabCreateDetails">index</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabCreateDetails">openerTabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabCreateDetails">pinned</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabCreateDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabCreateDetails">windowId</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabScriptAndCSSDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabScriptAndCSSDetails">allFrames</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabScriptAndCSSDetails">code</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabScriptAndCSSDetails">file</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabScriptAndCSSDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabScriptAndCSSDetails">matchAboutBlank</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabScriptAndCSSDetails">runAt</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabsCaptureVisibleTabDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsCaptureVisibleTabDetails">imageCaptureormat</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsCaptureVisibleTabDetails">jpegQuality</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabQueryDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">active</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">audible</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">currentWindow</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">highlighted</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">index</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">lastFocusedWindow</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">muted</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">pinned</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">status</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">title</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">windowId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabQueryDetails">windowType</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabReloadDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabReloadDetails">bypassCache</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabSendMessageDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabSendMessageDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabUpdateDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabUpdateDetails">active</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabUpdateDetails">highlighted</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabUpdateDetails">muted</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabUpdateDetails">openerTabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabUpdateDetails">pinned</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabUpdateDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabIdWindowId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabIdWindowId">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabIdWindowId">windowId</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabsWindowIdIsWindowClosing</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsWindowIdIsWindowClosing">isWindowClosing</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsWindowIdIsWindowClosing">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabsOnUpdatedChangeDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsOnUpdatedChangeDetails">audible</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsOnUpdatedChangeDetails">favIconUrl</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsOnUpdatedChangeDetails">mutedDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsOnUpdatedChangeDetails">pinned</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsOnUpdatedChangeDetails">status</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsOnUpdatedChangeDetails">title</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsOnUpdatedChangeDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtTabsOnActivatedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtTabsOnCreatedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtTabsOnRemovedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtTabsOnUpdatedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtBrowserTabs</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">captureVisibleTab</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">connect</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">create</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">executeScript</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">get</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">getCurrent</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">insertCSS</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">onActivated</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">onCreated</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">onRemoved</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">onUpdated</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">query</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">reload</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">remove</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">sendMessage_TBD</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserTabs">update</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtTabsAPI</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTabsAPI">tabs</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                </dl>
                            </section>
                        </section>
                    </section>


                <section>
                    <h4 id="webNavigation">The <code>webNavigation</code> object</h4>
                    <section class="introductory">
                        <h4>Overview</h4>
                        <p>
                            The <code>webNavigation</code> object is used to monitor events related to networking requests.
                        </p>
                    </section><section class="introductory">
                        <h4>Manifest</h4>
                        <p>
                            The <code>"webNavigation"</code> permission is required to use this object.
                        </p>
<pre>
{
    "permissions": [                               // Required
        "webNavigation"                            // Required
    ]                                              // Required   
}
</pre>
                    </section>
                    <section class="introductory">
                        <h4>Context</h4>
                        <p>
                            This API is available in Window context (background, event, popup, options and custom pages).
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>WebIDL Definition</h4>
                        <p>
                            A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
                        </p>






<pre class="def idl">
enum BrowserExtTransitionType { "link", "typed" };
dictionary BrowserExtWebNavigationOnBeforeNavigateDetails {
    long frameId;
    long parentFrameId;
    long tabId;
    double timeStamp;
    DOMString url;
};
dictionary BrowserExtWebNavigationOnCommittedDetails {
    long frameId;
    long processId;
    long tabId;
    double timeStamp;
    TransitionType transitionType;
    DOMString url;
};
dictionary BrowserExtWebNavigationOnCompletedDetails {
    long frameId;
    long processId;
    long tabId;
    double timeStamp;
    DOMString url;
};
dictionary BrowserExtWebNavigationOnDOMContentLoadedDetails {
    long frameId;
    long processId;
    long tabId;
    double timeStamp;
    DOMString url;
};
dictionary BrowserExtWebNavigationOnErrorOccurredDetails {
    DOMString error;
    long frameId;
    long tabId;
    double timeStamp;
    DOMString url;
};
dictionary BrowserExtWebNavigationOnReferenceFragmentUpdatedDetails {
    long frameId;
    long processId;
    long tabId;
    double timeStamp;                           
    BrowserExtTransitionType transitionType;
    DOMString url;
};
callback BrowserExtWebNavigationOnBeforeNavigateCallback = void (BrowserExtWebNavigationOnBeforeNavigateDetails details);
callback BrowserExtWebNavigationOnCommittedCallback = void (BrowserExtWebNavigationOnCommittedDetails details);
callback BrowserExtWebNavigationOnCompletedCallback = void (BrowserExtWebNavigationOnCompletedDetails details);
callback BrowserExtWebNavigationOnDOMContentLoadedCallback = void (BrowserExtWebNavigationOnDOMContentLoadedDetails details);
callback BrowserExtWebNavigationOnErrorOccurredCallback = void (BrowserExtWebNavigationOnErrorOccurredDetails details);
callback BrowserExtWebNavigationOnReferenceFragmentUpdated = void (BrowserExtWebNavigationOnReferenceFragmentUpdatedDetails details);
[NoInterfaceObject]
interface BrowserExtBrowserWebNavigation {
    void onBeforeNavigate(BrowserExtWebNavigationOnBeforeNavigateCallback callback);
    void onCommitted(BrowserExtWebNavigationOnCommittedCallback callback);
    void onCompleted(BrowserExtWebNavigationOnCompletedCallback callback);
    void onDOMContentLoaded(BrowserExtWebNavigationOnDOMContentLoadedCallback callback);
    void onErrorOccurred(BrowserExtWebNavigationOnErrorOccurredCallback callback);
    void onReferenceFragmentUpdated(BrowserExtWebNavigationOnReferenceFragmentUpdated callback);
};
    
[NoInterfaceObject, Exposed=Window, CheckAnyPermissions_browserExtWebNavigation_]
interface BrowserExtWebNavigationAPI {
    readonly attribute BrowserExtWebNavigation webNavigation; 
};
Browser implements BrowserExtWebNavigationAPI;
</pre>
                        <section class="introductory">
                            <h4> Definitions</h4>
                            <dl>
                                <dt> <dfn>BrowserExtTransitionType</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTransitionType">link</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtTransitionType">typed</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebNavigationOnBeforeNavigateDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnBeforeNavigateDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnBeforeNavigateDetails">parentFrameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnBeforeNavigateDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnBeforeNavigateDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnBeforeNavigateDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebNavigationOnCommittedDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCommittedDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCommittedDetails">processId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCommittedDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCommittedDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCommittedDetails">transitionType</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCommittedDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebNavigationOnCompletedDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCompletedDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCompletedDetails">processId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCompletedDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCompletedDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnCompletedDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebNavigationOnDOMContentLoadedDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnDOMContentLoadedDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnDOMContentLoadedDetails">processId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnDOMContentLoadedDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnDOMContentLoadedDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnDOMContentLoadedDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebNavigationOnErrorOccurredDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnErrorOccurredDetails">error</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnErrorOccurredDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnErrorOccurredDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnErrorOccurredDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnErrorOccurredDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebNavigationOnReferenceFragmentUpdatedDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnReferenceFragmentUpdatedDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnReferenceFragmentUpdatedDetails">processId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnReferenceFragmentUpdatedDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnReferenceFragmentUpdatedDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnReferenceFragmentUpdatedDetails">transitionType</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationOnReferenceFragmentUpdatedDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebNavigationOnBeforeNavigateCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebNavigationOnCommittedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebNavigationOnCompletedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebNavigationOnDOMContentLoadedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebNavigationOnErrorOccurredCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebNavigationOnReferenceFragmentUpdated</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtBrowserWebNavigation</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebNavigation">onBeforeNavigate</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebNavigation">onCommitted</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebNavigation">onCompleted</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebNavigation">onDOMContentLoaded</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebNavigation">onErrorOccurred</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebNavigation">onReferenceFragmentUpdated</dfn></dt>
                                <dd>
                                    is TBD</p>
                                <dt> <dfn>BrowserExtWebNavigationAPI</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebNavigationAPI">webNavigation</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                </dl>
                            </section>
                        </section>
                    </section>


                <section>
                    <h4 id="webRequest">The <code>webRequest</code> object</h4>
                    <section class="introductory">
                        <h4>Overview</h4>
                        <p>
                            The <code>webRequest</code> object is used to modify or cancel networking requests.
                        </p>
                    </section><section class="introductory">
                        <h4>Manifest</h4>
                        <p>
                            The <code>"webRequest"</code> permission is required to use this object.
                        </p>
<pre>
{
    "permissions": [                           // Required
        "webRequest"                            // Required
        "webRequestBlocking"                    // Optional
        "&lt;URL pattern&gt;"                         // Optional, e.g. "*://*.w3c.org/"
    ]                                          // Required   
}
</pre>
                    </section>
                    <section class="introductory">
                        <h4>Context</h4>
                        <p>
                            This API is available in Window context (background, event, popup, options and custom pages).
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>WebIDL Definition</h4>
                        <p>
                            A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
                        </p>




<pre class="def idl">
enum BrowserExtResourceType { "font", "image", "main_frame", "object", "other", "ping", "script", "stylesheet", "sub_frame", "xmlhttprequest" };
dictionary BrowserExtWebRequestUploadDetails {
    any bytes;
    DOMString? file;
};
dictionary BrowserExtWebRequestRequestBody {
    DOMString? error;
    object? formData;
    sequence&lt;BrowserExtWebRequestUploadData&gt;? rawData;
};
dictionary BrowserExtWebRequestHttpHeader {
    DOMString keyName;
    any value;
};
dictionary BrowserExtWebRequestHttpHeaders {
    sequence&lt;BrowserExtWebRequestHttpHeader&gt; data; 
};
dictionary BrowserExtWebRequestOnBeforeRequestDetails {
    long frameId;
    DOMString method;
    long parentFrameId;
    BrowserExtWebRequestRequestBody? requestBody;
    DOMString requestId;
    long tabId;
    double timeStamp;
    BrowserExtResourceType type;
    DOMString url;
};
dictionary BrowserExtWebRequestOnBeforeSendHeadersDetails {
    long frameId;
    DOMString method;
    long parentFrameId;
    BrowserExtWebRequestHttpHeaders? requestHeaders;
    DOMString requestId;
    long tabId;
    double timeStamp;
    BrowserExtResourceType type;
    DOMString url;
};
dictionary BrowserExtWebRequestOnCompletedDetails {
    long frameId;
    boolean fromCache;
    DOMString method;
    long parentFrameId;
    DOMString requestId;
    BrowserExtWebRequestHttpHeaders? responseHeaders;
    DOMString? serverIP;
    long statusCode;
    DOMString statusLine;
    long tabId;
    double timeStamp;   
    BrowserExtResourceType type;
    DOMString url;
}; 
dictionary BrowserExtWebRequestOnHeadersReceivedDetails {
    long frameId;
    DOMString method;
    long parentFrameId;
    DOMString requestId;
    BrowserExtWebRequestHttpHeaders? responseHeaders;
    long statusCode;
    DOMString statusLine;
    long tabId;
    double timeStamp;   
    BrowserExtResourceType type;
    DOMString url;
};
dictionary BrowserExtWebRequestOnSendHeadersDetails {
    long frameId;
    DOMString method;
    long parentFrameId;
    BrowserExtWebRequestHttpHeaders? requestHeaders;
    DOMString requestId;
    long tabId;
    double timeStamp;   
    BrowserExtResourceType type;
    DOMString url;
};
callback BrowserExtWebRequestOnBeforeRequestCallback = void (BrowserExtWebRequestOnBeforeRequestDetails details);
callback BrowserExtWebRequestOnBeforeSendHeadersCallback = void (BrowserExtWebRequestOnBeforeSendHeadersDetails details);
callback BrowserExtWebRequestOnCompletedCallback = void (BrowserExtWebRequestOnCompletedDetails details);
callback BrowserExtWebRequestOnHeadersReceivedCallback = void (BrowserExtWebRequestOnHeadersReceivedDetails details);
callback BrowserExtWebRequestOnSendHeadersCallback = void (BrowserExtWebRequestOnSendHeadersDetails details);
[NoInterfaceObject]
interface BrowserExtBrowserWebRequest {
    void onBeforeRequest(BrowserExtWebRequestOnBeforeRequestCallback callback);
    void onBeforeSendHeaders(BrowserExtWebRequestOnBeforeSendHeadersCallback callback);
    void onCompleted_TBD(BrowserExtWebRequestOnCompletedCallback callback);
    void onHeadersReceived(BrowserExtWebRequestOnHeadersReceivedCallback callback);
    void onSendHeaders(Function callback);
};
[NoInterfaceObject, Exposed=Window, CheckAnyPermissions_browserExtWebRequest_]
interface BrowserExtWebRequestAPI {
    readonly attribute BrowserExtWebRequest webRequest; 
};
Browser implements BrowserWebRequestAPI;
</pre>
                        <section class="introductory">
                            <h4> Definitions</h4>
                            <dl>

                                <dt> <dfn>BrowserExtResourceType</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">font</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">image</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">main_frame</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">object</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">other</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">ping</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">script</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">stylesheet</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">sub_frame</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtResourceType">xmlhttprequest</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebRequestUploadDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestUploadDetails">bytes</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestUploadDetails">file</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebRequestRequestBody</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestRequestBody">error</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestRequestBody">formData</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestRequestBody">rawData</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebRequestHttpHeader</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestHttpHeader">keyName</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestHttpHeader">value</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebRequestHttpHeaders</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestHttpHeaders">data</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebRequestOnBeforeRequestDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeRequestDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeRequestDetails">method</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeRequestDetails">parentFrameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeRequestDetails">requestBody</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeRequestDetails">requestId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeRequestDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeRequestDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeRequestDetails">type</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeRequestDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebRequestOnBeforeSendHeadersDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeSendHeadersDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeSendHeadersDetails">method</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeSendHeadersDetails">parentFrameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeSendHeadersDetails">requestHeaders</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeSendHeadersDetails">requestId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeSendHeadersDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeSendHeadersDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeSendHeadersDetails">type</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnBeforeSendHeadersDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebRequestOnCompletedDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">fromCache</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">method</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">parentFrameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">requestId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">responseHeaders</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">serverIP</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">statusCode</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">statusLine</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">type</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnCompletedDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebRequestOnHeadersReceivedDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">method</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">parentFrameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">requestId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">responseHeaders</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">statusCode</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">statusLine</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">type</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnHeadersReceivedDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWebRequestOnSendHeadersDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnSendHeadersDetails">frameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnSendHeadersDetails">method</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnSendHeadersDetails">parentFrameId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnSendHeadersDetails">requestHeaders</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnSendHeadersDetails">requestId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnSendHeadersDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnSendHeadersDetails">timeStamp</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnSendHeadersDetails">type</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestOnSendHeadersDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebRequestOnBeforeRequestCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebRequestOnBeforeSendHeadersCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebRequestOnCompletedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebRequestOnHeadersReceivedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebRequestOnSendHeadersCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtBrowserWebRequest</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebRequest">onBeforeRequest</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebRequest">onBeforeSendHeaders</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebRequest">onCompleted_TBD</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebRequest">onHeadersReceived</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtBrowserWebRequest">onSendHeaders</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWebRequestAPI</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWebRequestAPI">webRequest</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                </dl>
                            </section>
                        </section>
                    </section>

                <section>
                    <h4 id="windows">The <code>windows</code> object</h4>
                    <section class="introductory">
                        <h4>Overview</h4>
                        <p>
                            The <code>windows</code> object is used to access the UI windows managed by the browser.
                        </p>
                    </section><section class="introductory">
                        <h4>Manifest</h4>
                        <p>
                            There are no additional manifest entries required for an extension to use this object.
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>Context</h4>
                        <p>
                            This API is available in Window context (background, event, popup, options and custom pages).
                        </p>
                    </section>
                    <section class="introductory">
                        <h4>WebIDL Definition</h4>
                        <p>
                            A description of the special <a href="#webidl">WebIDL syntax considerations</a> for browser extensions are defined elsewhere in this document.
                        </p>

<pre class="def idl">
enum BrowserExtWindowsWindowType { "detached_panel", "normal", "panel", "popup" };
enum BrowserExtWindowsWindowState { "docked", "fullscreen", "maximized", "minimized", "normal" };
dictionary BrowserExtCreateWindowDetails {
    boolean focused;
    long height;
    boolean incognito;
    long left;
    BrowserExtWindowsWindowState? state;
    long tabId;
    long top;
    (DOMString? or sequence&lt;DOMString&gt;?) url;
    long width;
    BrowserExtWindowsWindowType? windowType;
};
dictionary BrowserExtGetWindowDetails {
    boolean populate;
    sequence&lt;BrowserExtWindowType&gt;? windowTypes;
};
dictionary BrowserExtWindowUpdateDetails {
    boolean drawAttention;
    boolean focused;
    long height;
    long left;
    long top;
    long width;
    BrowserExtWindowState? windowState;
};
dictionary BrowserExtWindowsWindow {
    boolean alwaysOnTop;
    boolean focused;
    long height;
    long id;
    boolean incognito;
    long left;
    sequence&lt;BrowserExtTabsTab&gt;? tabs;
    long top;
    DOMString? sessionId;
    BrowserExtWindowsWindowState? state;
    long width;
    BrowserExtWindowsWindowType? windowType;
};
callback BrowserExtWindowsOnFocusChangedCallback = void (long windowId);
[NoInterfaceObject]
interface BrowserExtWindows {
    Promise&lt;BrowserExtWindowsWindow&gt; create(CreateWindowDetails details);
    Promise&lt;BrowserExtWindowsWindow&gt; get(long windowId, optional BrowserExtGetWindowDetails details);
    Promise&lt;sequence&lt;BrowserExtWindowsWindow&gt;&gt; getAll(optional BrowserExtGetWindowDetail details);
    Promise&lt;BrowserExtWindowsWindow&gt; getCurrent_TBD(optional BrowserExtGetWindowDetail details);
    Promise&lt;BrowserExtWindowsWindow&gt; getLastFocused(optional BrowserExtGetWindowDetail details);
    void onFocusChanged(BrowserExtWindowsOnFocusChangedCallback callback);
    Promise&lt;BrowserExtWindowsWindow&gt; update(long windowId, optional BrowserExtWindowUpdateDetails details);
};
    
[NoInterfaceObject, Exposed=Window, CheckAnyPermissions_browserExt_]
interface BrowserExtWindowsAPI {
readonly attribute BrowserExtWindows windows; 
};
Browser implements BrowserExtWindowsAPI;
</pre>
                        <section class="introductory">
                            <h4> Definitions</h4>
                            <dl>
                                <dt> <dfn>BrowserExtWindowsWindowType</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindowType">detached_panel</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindowType">normal</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindowType">panel</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindowType">popup</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWindowsWindowState</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindowState">docked</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindowState">fullscreen</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindowState">maximized</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindowState">minimized</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindowState">normal</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtCreateWindowDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">focused</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">height</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">incognito</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">left</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">state</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">tabId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">top</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">url</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">width</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtCreateWindowDetails">windowType</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtGetWindowDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtGetWindowDetails">populate</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtGetWindowDetails">windowTypes</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWindowUpdateDetails</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowUpdateDetails">drawAttention</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowUpdateDetails">focused</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowUpdateDetails">height</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowUpdateDetails">left</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowUpdateDetails">top</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowUpdateDetails">width</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowUpdateDetails">windowState</dfn></dt>
                                <dd> is TBD_define_here</dd>

                                <dt> <dfn>BrowserExtWindowsWindow</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">alwaysOnTop</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">focused</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">height</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">id</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">incognito</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">left</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">tabs</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">top</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">sessionId</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">state</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">width</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsWindow">windowType</dfn></dt>
                                <dd> is TBD_define_here</dd>


                                <dt> <dfn>BrowserExtWindowsOnFocusChangedCallback</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWindows</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindows">create</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindows">get</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindows">getAll</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindows">getCurrent_TBD</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindows">getLastFocused</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindows">onFocusChanged</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindows">update</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn>BrowserExtWindowsAPI</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                <dt> <dfn data-dfn-for="BrowserExtWindowsAPI">windows</dfn></dt>
                                <dd> is TBD_define_here</dd>
                                </dl>
                            </section>
                        </section>
                    </section>
            </section>

        <section class='informative'>
            <h3>Native Messaging</h3>
            <p>Native Messaging is covered in another specification. Refer to the Native Messaging for Browser Extensions specification [[browserext-native]] for more information.</p>
        </section>

</section>
    <section >
        <h2 id="manifest-json">Manifest Format</h2>
        <section>
            <h3>Pre-parsing</h3>
            Standards-compliant browsers are expected to ignore "//" comments. Disregarding comments, the manifest.json file format for browser extensions is expected to be fully JSON compliant. Malformed JSON files are not supported.  If manifest keys that are not defined in this specification are specified, other browsers MAY ignore those keys.
        </section>
        <section>
            <h3>Permissions URL patterns</h3>
            <p class="issue">##28## Define how and where permission patterns are used<br /> </p>
        </section>
        <section class='informative'>
            <h3>Full Example</h3>
<pre>
// Standards-compliant browsers are expected to ignore "//" comments. Disregarding comments, 
// the manifest.json file format for browser extensions is expected to be fully JSON compliant. 
// Malformed JSON files are not supported.
//
// Other manifest keys that are well-formed JSON but are not listed here MUST be ignored.
//
// Note that some fields marked as Optional here are required by vendor-specific distribution Stores.
{
  "name": "The Name of Your Extension",             // Required
  "version": "Your Extension Version",              // Required
  "default_locale": "en",                           // Required if locales are used. Otherwise, not allowed
  "description": "Description for Your Extensions",   
  "icons": {...},                                    
  "developer": {                                    
       "name": "Your Name or Company",              
       "url": "Company Website"                      
  }
  // Note: Some browsers require an extension to use either browser_action or page_action, but not both simultaneously
  "browser_action": {  
      "default_icon": {...},                        // Same format as "icons"
      "default_popup": "Page URL",
      "default_title": "Title string"
  },
  "page_action": {...},                             // Same format as "browser_action"
  
  "browser_specific_settings": {                    
       "&lt;browser_name&gt;": {                          // Examples "gecko","opera","edge"
            "&lt;key&gt;": "&lt;value&gt;"                      // Examples "strict_min_version": "42.0", "id": "addon@example.com"
       }
  },
  "background": {                                   
      "page": "Page URL",                           // Only one of "page" or "scripts" is supported, but not both simultaneously
      "scripts": [],                                // Only one of "page" or "scripts" is supported, but not both simultaneously
      "persistent": false                           // Required if "background" is specified
  },
  "content_scripts": {                                                    
      "all_frames": false,                          
      "css": [],                                   
      "exclude_matches": [],                        
      "js": [],                                     
      "matches": [],                                
      "run_at" : "document_start"                   // Also "document_end", "document_idle"
  }
  "content_security_policy": "&lt;policy-string&gt;",     
  
  "options_page": "Page URL",                            // Optional
  "manifest_version": 2,                            // Not used
  "required_keys": [],                              // If a browser does not recognize a key in this list, it MUST 
                                                    // reject the manifest (e.g. "sidebar_action")
                                                    // FEEDBACK: Rename to "required_capabilities"
  "permissions": {                                  
       "activeTab",                                                
       "contextMenus",                              
       "storage",                                   
       "tabs",                                      
       "webNavigation",                            
       "webRequest",                                
       "webRequestBlocking",                        
       "&lt;url-pattern&gt;"                              // Examples "http://*/*", "&lt;all_urls&gt;"
  },
  "web_accessible_resources": [...]    
  "externally_connectable" : [
       "ids":[...], // Identifiers for other extensions that are allowed to send messages
       "matches":[...] // URL patterns for hosted web pages allowed to send messages 
  ]                             
}
</pre>
        </section>
    </section>
    <section >
        <h2>Extension Resources</h2>
        <section>
            <h3>The <code>browserext://</code> protocol</h3>
            <p>
                To access resources within the extension, such as <code>browserext://&lt;ext_id&gt;/options.html</code>, the <code>browserext://</code> protocol is used.
            </p>
        </section>
        <section>
            <h3>Extension IDs</h3>
            <p>
                Each extension has an extension ID that follows the <code>browserext://</code> protocol. For example
            </p>
            <p class="example">
                <code>browserext://MyExtension_c1wakc4j0nefm/options.html</code>
                <code>browserext://dfcijpibodeoenkablikbkiobbdnkfki/options.html</code>
            </p>
            <p>
                The algorithms that generate these IDs are different for each browser. To access these resources, do not hardcode the ID generated by a particular browser. Instead, use the <code>runtime.getURL()</code> method to convert a relative file name or path to the absolute name or path, which includes the extension ID.
            </p>
        </section>
    </section>
    <section  >
        <h2>Content Security Polity (CSP)</h2>
        The default CSP is discussed in the specification [[CSP3]] . 
        <p class="issue">##29## Complete this section, discussing special considerations for extensions and CSP.<br />  </p>
    </section>
        <section  >
            <h2>Testing Extensions with WebDriver</h2>
            <p>
                Browsers vendors MAY choose to implement WebDriver support in their browsers to allow for the automated testing of browser extensions. To implement this support, the browser MUST support:
            </p>
            <ul>
                <li>The base functionality as defined in the WebDriver specification [[webdriver]] </li>
                <li>Additional functionality required to support browser extensions, defined below in the Browser Extensions specification</li>
            </ul>
            <p class="issue">[ISSUE] (2016.09.22) ##31## Title should be enough to identify extension, but do we want to add an extensionId or extensionName property? Will consult BE CG<br />  </p>
            <p class="issue">[ISSUE] (2016.09.22) ##33## Add extension during session at runtime<br /></p>
            <p class="issue">[ISSUE] (2016.09.22) ##34## For installing, you will need an endpoint for installing/activating at runtime<br /> </p>
            <p class="issue">[ISSUE] (2016.09.22) Support user permissions/prompts (Need to follow up with Kris)</p>
            <p class="issue">[ISSUE] (2016.09.22) Should be overlap with Permissions API – chat with them (need to discuss, not sure what this means)</p>
            <section  >
                <h3>Protocol</h3>
                <section  >
                    <h4>List of Endpoints</h4>
                    <p>In addition to the endpoints defined in the WebDriver specification [[webdriver]], support for browser extensions requires these additional endpoints.</p>
                    <table class="simple">
                        <tbody>
                            <tr>
                                <th>Method</th>
                                <th>URI Template</th>
                                <th>Command</th>
                            </tr>
                            <tr>
                                <td>GET</td>
                                <td>/session/{<var>sessionId</var>}/browserext/actions</td>
                                <td>Get Browser Extension Actions</td>
                            </tr>
                            <tr>
                                <td>POST</td>
                                <td>/session/{<var>sessionId</var>}/browserext/actions/{<var>ExtensionActionID</var>}</td>
                                <td>Take Browser Extension Action</td>
                            </tr>
                            <tr>
                                <td>POST</td>
                                <td>/session/{<var>sessionId</var>}/element/{<var>element id</var>}/browserext/contextMenu</td>
                                <td>Select Browser Extension Context Menu</td>
                            </tr>
                            <tr>
                                <td>POST</td>
                                <td>/session/{<var>sessionId</var>}/element/{<var>element id</var>}/browserext/contextMenu/{<var>item</var>}</td>
                                <td>Select Browser Extension Context Menu Item</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section  >
                    <h4>Handling Errors</h4>
                    <p>In addition to the codes defined in the Handling Errors section of the WebDriver specification [[webdriver]], support support for browser extensions requires support the following additional error codes:</p>
                    <table class="simple">
                        <tbody>
                            <tr>
                                <th>
                                    Error Code
                                </th>
                                <th>
                                    HTTP Status
                                </th>
                                <th>
                                    JSON Error Code
                                </th>
                                <th>
                                    Description
                                </th>
                            </tr>
                            <tr>
                                <td><dfn id="dfn-no-such-browser-extension" data-dfn-type="dfn">no such browser extension</dfn></td>
                                <td>400</td>
                                <td><code>no such browser extension</code></td>
                                <td>
                                    There is no available browser extension on the current page with the given id.
                                </td>
                            </tr>
                            <tr>
                                <td><dfn id="dfn-no-such-browser-extension-popup" data-dfn-type="dfn">no such browser extension popup</dfn></td>
                                <td>400</td>
                                <td><code>no such browser extension popup</code></td>
                                <td>
                                    A request to switch to a browser extension popup could not be satisfied because
                                    there is no browser extension popup currently open.
                                </td>
                            </tr>
                            <tr>
                                <td><dfn id="dfn-no-such-browser-extension-context-menu-item" data-dfn-type="dfn">no such browser extension context menu item</dfn></td>
                                <td>400</td>
                                <td><code>no such browser extension context menu item</code></td>
                                <td>
                                    A request to select an extension context menu item could not be completed
                                    because there is no matching extension context menu item for the given
                                    element.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                </section>
                <section >
                    <h3>
                        Capabilities
                    </h3>
                    <p>In addition to the Capabilities defined in the WebDriver specification [[webdriver]], support support for browser extensions requires the following additional entry on the <i>server capabilities</i> JSON object:</p>
                    <dl>
                        <dt>
                            "<code>enabledExtensions</code>"
                        </dt>
                        <dd>
                            An array of relative paths which point to the location of browser extension files. The path <em title="MUST" class="rfc2119">MUST</em> point to either a single file appropriate for a specific brower (e.g. .crx) or a folder which contains the extension source files. If a folder is specified, the folder itself <em title="MUST" class="rfc2119">MUST</em> contain a <code>manifest.json</code> file. Subfolders containing <code>manifest.json</code> files will not be searched.
                        </dd>
                    </dl>
                    <section  >
                        <h4>Extension Lifetime</h4>
                        <p>No browser extension will be installed or pre-loaded during a WebDriver session unless it is explicitly specified in the <code>enabledExtensions</code> array. Browser extensions loaded during the session will not be available to other active instances of the browser that are not part of the WebDriver session. When the session ends, the array of browser extensions are unloaded and uninstalled.</p>
                    </section>
                </section>
                <section  >
                    <h3>
                        Browser Extensions Commands
                    </h3>
                    <p>Users interact with extensions through several means. First there are actions embedded in the chrome of the browser, which can do something directly or open a popup. If the extension uses a popup, it can contain any html content. Finally, extensions can add items to the browser's context menu. WebDriver needs to be able to emulate user actions for all three of these controls in order to completely emulate user interaction.</p>
                    <p>In addition to the commands defined in the WebDriver specification [[webdriver]], support support for browser extensions requires the following additional commands. </p>
                    <section>
                        <h3><code>getBrowserExtActions()</code></h3>
                        <table class="simple jsoncommand">
                            <tbody>
                                <tr>
                                    <th>HTTP Method</th>
                                    <th>Path Template</th>
                                    <th>Notes</th>
                                </tr>
                                <tr>
                                    <td>GET</td>
                                    <td id="get-browser-extension-actions">/session/{<var>sessionId</var>}/browserext/actions</td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            This command returns a list of browser extension actions
                            available on the current page. Note that this can change from page to page.
                            It MUST return a list of objects which describes the available browser extension
                            actions using the following algorithm for each action:

                        </p><ul>
                            <li><p>Let <var>action</var> be a new JSON Object.</p></li>

                            <li>
                                <p>
                                    Set the property <code>id</code> on <var>action</var> to a
                                    string which is unique for the current session.
                                </p>
                            </li>

                            <li>
                                <p>
                                    Set the property <code>actionTitle</code> on <var>action</var> to the
                                    mouseover text for the action.
                                </p>
                            </li>

                            <li>
                                <p>
                                    Set the property <code>icon</code> on <var>action</var> to the
                                    filename of the icon file or an empty string if none is displayed. If the
                                    icon is dynamically generated, the current icon MUST be returned as a
                                    lossless PNG image encoded using Base64.
                                </p>
                            </li>

                            <li>
                                <p>
                                    Set the property <code>badgeText</code> on <var>action</var> to the
                                    badge text displayed over the action or an empty string if none is
                                    present.
                                </p>
                            </li>

                            <li>
                                <p>
                                    Return <code>success</code> with <var>data</var> action
                                </p>
                            </li>
                        </ul>
                        <p></p>
                    </section>
                    <section>
                        <h3><code>takeBrowserExtAction()</code></h3>
                        <table class="simple jsoncommand">
                            <tbody>
                                <tr>
                                    <th>HTTP Method</th>
                                    <th>Path Template</th>
                                    <th>Notes</th>
                                </tr>
                                <tr>
                                    <td>POST</td>
                                    <td id="take-browser-extension-action">/session/{<var>sessionId</var>}/browserext/action/{<var>browserExtActionId</var>}</td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            This command causes a browser extension to be activated, as if
                            the user had clicked the browser extension's browser action icon in the browser's chrome. Depending
                            on the browser extension, this could cause a popup to be opened.
                        </p>
                        <dl class="parameters">
                            <dt>DOMString browserExtActionId</dt>
                            <dd>
                                The unique identifier of the browser extension action to be taken, as returned
                                by the <code>getBrowserExtActions()</code> command.
                            </dd>
                        </dl>
                        <p>
                            If the id specified does not correspond to a browser extension on the current
                            page, a
                            <code><a href="#status-no-such-browser-extension">no such browser extension</a></code>
                            status code MUST be returned.
                        </p>
                    </section>
                    <section>
                        <!-- getExtensionContextMenuItems() -->
                        <h3><code>selectBrowserExtContextMenu()</code></h3>
                        <table class="simple jsoncommand">
                            <tbody>
                                <tr>
                                    <th>HTTP Method</th>
                                    <th>Path Template</th>
                                    <th>Notes</th>
                                </tr>
                                <tr>
                                    <td>POST</td>
                                    <td id="get-browser-extension-context-menu-items">/session/{<var>sessionId</var>}/element/{<var>elementId</var>}/browserext/contexMenu</td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            This command opens a context menu for
                            a given element. It MUST return a list of objects which describes the
                            available context menu items using the following algorithm for each menu
                            item:

                        </p><ul>
                            <li><p>Let <var>menuitem</var> be a new JSON Object.</p></li>

                            <li>
                                <p>
                                    Set the property <code>id</code> on <var>menuitem</var> to a
                                    string which is unique for the current session.
                                </p>
                            </li>

                            <li>
                                <p>
                                    Set the property <code>menuItemTitle</code> on <var>menuitem</var> to the
                                    text that is displayed in the UI.
                                </p>
                            </li>

                            <li>
                                <p>
                                    Set the property <code>icon</code> on <var>menuitem</var> to the
                                    filename of the icon file or an empty string if none is displayed.

                                    If the icon is set because of the type of the context menu item (such as
                                    a radio button or checkbox), the <code>icon</code> property MUST be set
                                    to a string which is consistent for all icons of that type and status
                                    (e.g. checked), including across sessions.
                                </p>
                            </li>

                            <li>
                                <p>
                                    Set the property <code>parent</code> on <var>menuitem</var> to the
                                    id of the item's parent or an empty string if the menuitem does not have
                                    a parent.
                                </p>
                            </li>
                            <li>
                                <p>
                                    Set the property <code>itemType</code> on <var>menuitem</var> to a string value identifying the control type.
                                </p>
                                <table class="simple">
                                    <tbody>
                                        <tr>
                                            <th>
                                                String Value
                                            </th>
                                            <th>
                                                Description
                                            </th>
                                        </tr>
                                        <tr>
                                            <td>
                                                <code>checkbox</code>
                                            </td>
                                            <td>
                                                A checkbox element
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <code>normal</code>
                                            </td>
                                            <td>
                                                A standard menuItem element (text label)
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <code>radio</code>
                                            </td>
                                            <td>
                                                A radio element. Within a radio group, only one menuItem will have a value of <code>true</code>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <code>separator</code>
                                            </td>
                                            <td>
                                                A horizontal line separator, typically used between groups of related items such as radio groups
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li>
                                <p>
                                    Set the property <code>itemChecked</code> on <var>menuitem</var> to a boolean value indicating
                                    state of the item according to the following table. This applies only to items of itemType <code>checkbox</code> or <code>radio</code>. Within a radio group, only one menuItem will have a value of <code>true</code>.
                                </p>
                                <table class="simple">
                                    <tbody>
                                        <tr>
                                            <th>
                                                Boolean Value
                                            </th>
                                            <th>
                                                Description
                                            </th>
                                        </tr>
                                        <tr>
                                            <td>
                                                <code>true</code>
                                            </td>
                                            <td>
                                                Selected
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <code>false</code>
                                            </td>
                                            <td>
                                                Not selected
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li>
                                <p>
                                    Return <code>success</code> with data <var>menuitem</var>
                                </p>
                            </li>
                        </ul>

                        This list MUST contain all context menu items added by browser extensions and
                        MUST NOT contain any other context menu items.
                        <p></p>
                        <p>
                            After this command has been run, the context menu MUST remain open until the
                            next command that dismisses it (e.g. clicking, navigation) has been run.
                        </p>
                        <dl class="parameters">
                            <dt>WebElement elementId</dt>
                            <dd>
                                The id of the element for which the context menu should be opened.
                            </dd>
                        </dl>
                    </section>
                    <section>
                        <!-- selectExtensionContextMenuItem() -->
                        <h3><code>selectBrowserExtContextMenuItem()</code></h3>
                        <table class="simple jsoncommand">
                            <tbody>
                                <tr>
                                    <th>HTTP Method</th>
                                    <th>Path Template</th>
                                    <th>Notes</th>
                                </tr>
                                <tr>
                                    <td>POST</td>
                                    <td id="get-browser-extension-context-menu-items">/session/{<var>sessionId</var>}/element/{<var>elementId</var>}/browserext/contextMenu/{<var>menuitemId</var>}</td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            This command causes a context menu
                            item to be selected. This MUST have the same effect as a user clicking or
                            tapping the item in the open context menu.

                            If the menu item is a parent of other menu items, this command MAY open a
                            submenu, but MUST NOT have any other effect.
                        </p>
                        <p>
                            This command MUST be executed even if there is no context menu open.
                        </p>
                        <dl class="parameters">
                            <dt>String menuitemId</dt>
                            <dd>
                                The context menu item id, as returned by the
                                <code>selectBrowserExtContextMenu()</code>
                                command.
                            </dd>
                        </dl>
                        <p>
                            If no popup is currently open, a
                            <code><a href="#status-no-such-browser-extension-context-menu-item">no such extension context menu item</a></code>
                            status code MUST be returned.
                        </p>
                    </section>
                </section>
            </section>
            <section class='informative'>
                <h2>Packaging</h2>
                <p>
                    Browser extensions MAY be distributed and subsequently loaded as individual files or via a container, such as a *.zip archive. Regardless of the packaging format, these containers must contain the following:
                </p>
                <ul>
                    <li>manifest.json</li>
                    <li>Necessary JavaScript files (&lt;filename&gt;.js)</li>
                </ul>
                <section class='informative'>
                    <h3>Digital signatures</h3>
                    <p class="issue">
                        This is TBD.
                    </p>
                </section>
            </section>
        <section class="appendix" >
            <h2 id="acknowledgements">Acknownledgements</h2>
            <p>
                Many thanks to the members of the <a href="https://www.w3.org/community/browserext/">Browser Extension Community Group</a> for their detailed feedback on this specification. Thanks to the members of the <a href="http://www.w3.org/testing/browser/">Browser Testing and Tools Working Group</a> for their recommendations and feedback on WebDriver support.
            </p>
            <p>Some sections are reproduced from MDN:</p>
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Internationalization">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Internationalization</a></li>
                <li><a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/i18n/Locale-Specific_Message_reference">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/i18n/Locale-Specific_Message_reference</a></li>
            </ul>
        </section>
    <script>
        function updateResolved() {
            var e = document.getElementsByClassName("issue");
            var n = e.length;
            for (var i = 0; i < n; i++) {
                if (e[i].innerText.indexOf("[RESOLVED]") > 0) {
                    e[i].style.backgroundColor = "rgb(170,255,170)";
                }
                if (i <= 1) {
                    e[i].innerHTML += "<a href='#issue-1'>1</a> &nbsp; <a href='#issue-2'>2</a>  &nbsp; <a href='#issue-3'>3</a>  &nbsp;...&nbsp; <a href='#issue-" + (n) + "'>" + (n).toString() + "</a> ";
                }
                else if (i == (n-1)) {
                    e[i].innerHTML += "<a href='#issue-1'>1</a> &nbsp;...&nbsp; <a href='#issue-" + (i) + "'>" + (i).toString() + "</a> &nbsp;" + (i + 1).toString();
                } else {
                    e[i].innerHTML += "<a href='#issue-1'>1</a> &nbsp;...&nbsp; <a href='#issue-" + (i) + "'>" + (i).toString() + "</a> &nbsp;" + (i + 1).toString() + "&nbsp; <a href='#issue-" + (i + 2) + "'>" + (i + 2).toString() + "</a>  &nbsp;...&nbsp; <a href='#issue-" + (n) + "'>" + (n).toString() + "</a> ";
                }
            }
        }
        function updateCheckAnyPermissions() {
            var checkAnyPermissionsTokenPrefix = "CheckAnyPermissions_";
            var checkAnyPermissionsTokenPrefixReplaceWith = 'CheckAnyPermissions="';
            var checkAnyPermissionsTokenSuffix = "_";
            var e = document.body.getElementsByTagName("pre");
            var n = e.length;
            var q1 = -1;

            for (var i = 0; i < n; i++) {
                var s = e[i].innerHTML;
                if (s.indexOf(checkAnyPermissionsTokenPrefix) >= 0) {
                    q1 = s.indexOf(checkAnyPermissionsTokenPrefix) + checkAnyPermissionsTokenPrefix.length;
                    q2 = s.indexOf(checkAnyPermissionsTokenSuffix, q1);
                    s = s.substring(0, q2) + '"' + s.substring(q2 + 1, s.length);
                    e[i].innerHTML = s.replace(checkAnyPermissionsTokenPrefix, checkAnyPermissionsTokenPrefixReplaceWith);
                }
            }
        }

        // document.getElementsByClassName("issue-title marker")[0].childNodes[0].innerHTML = "<a href='https://github.com/browserext/browserext/issues/'>ISSUE 32</a>"
        function updateGithubIssues() {
            var githubIssueTokenPrefix = "##";
            var githubIssueTokenSuffix = "##";
            var e = document.body.getElementsByClassName("issue");
            var n = e.length;
            var q1 = -1;

            for (var i = 0; i < n; i++) {
                var s = e[i].innerHTML;
                if (s.indexOf(githubIssueTokenPrefix) >= 0) {
                    q1 = s.indexOf(githubIssueTokenPrefix) + githubIssueTokenPrefix.length;
                    q2 = s.indexOf(githubIssueTokenSuffix, q1);
                    s = s.substring(0, q2) + '">GitHub #' + s.substring(q1,q2) + "</a>" + s.substring(q2 + 2, s.length);
                    e[i].innerHTML = s.replace(githubIssueTokenPrefix, '<a href="https://github.com/browserext/browserext/issues/');

                }
            }
        }

        function checkRespecReady() {
            if (document.respecIsReady == null) {
                setTimeout("checkRespecReady()", 1000);
            }
            else {
                document.respecIsReady.then(function () {
                    updateResolved();
                    updateCheckAnyPermissions();
                    updateGithubIssues();
                });
            }
        }

        checkRespecReady();      
    </script>
</body>
</html>

